<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>godwifi</title>

<link rel="preload" as="image" href="freewifi.png" />
<link rel="icon" type="image/png" href="favicon.png">

<style>
  :root{
    --shadow: 0 20px 60px rgba(0,0,0,.25);
    --border: rgba(0,0,0,.15);
    --text: rgba(0,0,0,.9);
    --muted: rgba(0,0,0,.6);

    --taskbarBg: rgba(240,240,245,.98);
    --taskbarBorder: rgba(0,0,0,.12);

    --windowBg: rgba(250,250,252,.96);
    --windowBorder: rgba(0,0,0,.15);
    
    --titlebarBg: rgba(240,240,245,.98);
    --titlebarBorder: rgba(0,0,0,.1);
  }

  *{ box-sizing:border-box; }
  html,body{ height:100%; }
  body{
    margin:0;
    font-family: "Segoe UI", Ubuntu, "DejaVu Sans", Roboto, Arial, sans-serif;
    overflow:hidden;
    color:var(--text);
    user-select:none;
  }

  /* ===== Wallpaper ===== */
  .wallpaper{
    position:fixed; inset:0;
    background: #f2f2f2;
    display: grid;
    place-items: center;
  }

  .wallpaper::after{
    content: "Macie tu Wifi?...";
    font-size: clamp(32px, 5vw, 72px);
    font-weight: 300;
    color: rgba(0, 0, 0, 0.15);
    letter-spacing: 2px;
    text-align: center;
    padding: 0 20px;
    font-family: "Segoe UI", Ubuntu, "DejaVu Sans", sans-serif;
  }

  .grain{
    position:fixed; inset:0;
    pointer-events:none;
    opacity:.02;
    background-image:
      radial-gradient(circle at 20% 30%, rgba(0,0,0,.03), transparent 40%);
    mix-blend-mode: overlay;
  }

  .brandBlur{
    display: none;
  }

  /* ===== Windows-style Taskbar (bottom) ===== */
  .taskbar{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    height:48px;
    display:flex;
    align-items:center;
    padding:0 8px;
    background: var(--taskbarBg);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-top:1px solid var(--taskbarBorder);
    z-index:1000;
    box-shadow: 0 -2px 20px rgba(0,0,0,.4);
  }

  .taskbar-left{
    display:flex;
    align-items:center;
    gap:4px;
    flex:1;
  }

  .start-btn{
    width:48px;
    height:36px;
    display:grid;
    place-items:center;
    background: rgba(0,0,0,.05);
    border:1px solid rgba(0,0,0,.08);
    border-radius:4px;
    cursor:pointer;
    font-size:20px;
    color: rgba(0,0,0,.7);
    transition:.15s ease;
  }
  .start-btn:hover{
    background: rgba(0,0,0,.08);
  }

  .taskbar-app{
    height:36px;
    min-width:160px;
    max-width:200px;
    padding:0 12px;
    display:flex;
    align-items:center;
    gap:8px;
    background: rgba(0,0,0,.04);
    border:1px solid rgba(0,0,0,.06);
    border-radius:4px;
    cursor:pointer;
    transition:.15s ease;
    font-size:13px;
    color: rgba(0,0,0,.85);
  }
  .taskbar-app:hover{
    background: rgba(0,0,0,.06);
  }
  .taskbar-app.active{
    background: rgba(0,0,0,.08);
    border-bottom:2px solid rgba(80,150,255,.9);
  }

  .taskbar-icon{
    width:20px;
    height:20px;
    object-fit:contain;
  }

  .taskbar-right{
    display:flex;
    align-items:center;
    gap:16px;
    font-size:13px;
  }

  .system-tray{
    display:flex;
    align-items:center;
    gap:12px;
  }

  .tray-icon{
    padding:6px 10px;
    border-radius:4px;
    cursor:pointer;
    transition:.15s ease;
    color: rgba(0,0,0,.8);
  }
  .tray-icon:hover{
    background: rgba(0,0,0,.06);
  }
  
  .wifi-icon{
    width:16px;
    height:16px;
    display:inline-block;
    position:relative;
    vertical-align:middle;
  }
  
  .wifi-icon::before,
  .wifi-icon::after{
    content:"";
    position:absolute;
    border:2px solid rgba(0,0,0,.75);
    border-radius:50%;
  }
  
  /* Outer arc */
  .wifi-icon::before{
    width:14px;
    height:14px;
    top:-2px;
    left:1px;
    border-bottom:none;
    border-left:none;
    border-right:none;
    transform:rotate(-45deg);
  }
  
  /* Inner arc */
  .wifi-icon::after{
    width:9px;
    height:9px;
    top:1px;
    left:3.5px;
    border-bottom:none;
    border-left:none;
    border-right:none;
    transform:rotate(-45deg);
  }
  
  .wifi-dot{
    position:absolute;
    width:3px;
    height:3px;
    background:rgba(0,0,0,.75);
    border-radius:50%;
    bottom:1px;
    left:50%;
    transform:translateX(-50%);
  }

  .battery{
    display:flex;
    align-items:center;
    gap:6px;
    font-size:12px;
    color: rgba(0,0,0,.85);
  }
  .batteryIcon{
    width:22px;
    height:11px;
    border-radius:3px;
    border:1.5px solid rgba(0,0,0,.3);
    position:relative;
    overflow:hidden;
    background: rgba(0,0,0,.05);
  }
  .batteryLevel{
    position:absolute;
    left:0; top:0; bottom:0;
    width:50%;
    background: rgba(60,200,100,.9);
  }
  .batteryCap{
    position:absolute;
    right:-2.5px;
    top:2px;
    width:2.5px;
    height:6px;
    border-radius:2px;
    background: rgba(0,0,0,.3);
  }
  .batteryBolt{
    position:absolute;
    inset:0;
    display:grid;
    place-items:center;
    font-size:9px;
    opacity:0;
    transform: translateY(-0.5px);
    pointer-events:none;
  }

  /* ===== Desktop icons (Ubuntu-style grid) ===== */
  .icons{
    position:fixed;
    top:20px;
    left:20px;
    display:grid;
    gap:20px;
    z-index:10;
  }

  .icon{
    width:80px;
    text-align:center;
    font-size:12px;
    line-height:1.3;
    text-shadow: 0 1px 2px rgba(255,255,255,.8);
    color: rgba(0,0,0,.85);
    cursor:pointer;
  }

  .icon .pic{
    width:56px;
    height:56px;
    margin:0 auto 8px;
    border-radius:8px;
    display:grid;
    place-items:center;
    background: rgba(0,0,0,.04);
    border:1px solid rgba(0,0,0,.08);
    backdrop-filter: blur(8px);
    box-shadow: 0 2px 8px rgba(0,0,0,.08);
    transition:.15s ease;
  }
  .icon:hover .pic{
    transform: scale(1.05);
    background: rgba(0,0,0,.06);
  }

  .deskIconImg{
    width:65%;
    height:65%;
    object-fit:cover;
    border-radius:6px;
  }

  /* ===== Window system (Windows/Ubuntu hybrid) ===== */
  .stage{
    position:fixed;
    inset:0 0 48px 0;
    z-index:200;
    pointer-events:none;
  }

  .app{
    position:fixed;
    left:50%;
    top:50%;
    width:min(600px, 90vw);
    border-radius:8px 8px 0 0;
    overflow:hidden;
    background: var(--windowBg);
    border:1px solid var(--windowBorder);
    box-shadow: var(--shadow);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);

    opacity:0;
    pointer-events:none;
    transform: translate(-50%,-50%) translate(var(--x,0px), var(--y,0px)) scale(.96);
    transition: transform .18s ease, opacity .15s ease;
  }

  .app.open{
    opacity:1;
    pointer-events:auto;
    transform: translate(-50%,-50%) translate(var(--x,0px), var(--y,0px)) scale(1);
  }

  .app.dragging{
    transition:none !important;
    cursor:move;
  }

  /* Ubuntu-style titlebar */
  .titlebar{
    height:36px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 12px;
    background: var(--titlebarBg);
    border-bottom:1px solid var(--titlebarBorder);
    cursor:move;
  }

  .window-controls{
    display:flex;
    gap:8px;
    align-items:center;
  }
  
  .win-btn{
    width:28px;
    height:28px;
    border-radius:4px;
    border:0;
    padding:0;
    cursor:pointer;
    font-size:16px;
    font-weight:bold;
    display:grid;
    place-items:center;
    transition:.12s ease;
  }
  
  .win-btn.minimize{
    background: rgba(255,189,46,.85);
    color: rgba(0,0,0,.8);
  }
  .win-btn.minimize:hover{ background: rgba(255,189,46,1); }
  
  .win-btn.maximize{
    background: rgba(40,200,100,.85);
    color: rgba(0,0,0,.8);
  }
  .win-btn.maximize:hover{ background: rgba(40,200,100,1); }
  
  .win-btn.close{
    background: rgba(255,95,87,.85);
    color: rgba(255,255,255,.95);
  }
  .win-btn.close:hover{ background: rgba(255,95,87,1); }

  .title{
    font-size:13px;
    font-weight:600;
    color: rgba(0,0,0,.85);
    letter-spacing:.3px;
  }

  .content{
    padding:32px 24px 24px;
    text-align:center;
    color: rgba(0,0,0,.9);
  }

  .logoBtn{
    border:0;
    background:transparent;
    padding:0;
    cursor:pointer;
  }
  .logo{
    width:min(300px, 70vw);
    height:auto;
    display:block;
    margin:0 auto;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.4));
    transition:.2s ease;
  }
  .logoBtn:hover .logo{ transform: scale(1.03); }
  .hint{ margin-top:12px; font-size:13px; color: var(--muted); }

  .menuWrap{
    margin-top:18px;
    overflow:hidden;
    max-height:0;
    opacity:0;
    transform: translateY(-8px);
    transition: all .35s ease;
  }
  .menuWrap.open{
    max-height:400px;
    opacity:1;
    transform: translateY(0);
  }
  .menu{ display:grid; gap:12px; }

  .menu a{
    text-decoration:none;
    color: rgba(0,0,0,.9);
    border-radius:6px;
    padding:13px 16px;
    font-size:14px;
    font-weight:600;
    text-align:center;
    background: rgba(0,0,0,.06);
    border:1px solid rgba(0,0,0,.1);
    box-shadow: 0 1px 4px rgba(0,0,0,.08);
    transition:.15s ease;
  }
  .menu a:hover{
    background: rgba(0,0,0,.08);
    transform: translateY(-1px);
  }
  .menu a.discord{
    background: rgba(88,101,242,.9);
    border:1px solid rgba(88,101,242,1);
    color: rgba(255,255,255,.98);
  }
  .menu a.discord:hover{ background: rgba(88,101,242,1); }

  /* ===== Finder/File manager ===== */
  .app.finder{ width:min(720px, 92vw); }
  .finderBody{ padding:16px; }
  .finderGrid{
    display:grid;
    grid-template-columns: repeat(4, minmax(100px, 1fr));
    gap:12px;
  }
  .finderItem{
    border:0;
    background: rgba(0,0,0,.04);
    border:1px solid rgba(0,0,0,.08);
    border-radius:6px;
    padding:14px 12px;
    color: rgba(0,0,0,.9);
    display:grid;
    place-items:center;
    gap:8px;
    cursor:pointer;
    transition:.12s ease;
  }
  .finderItem:hover{
    background: rgba(0,0,0,.06);
    transform: translateY(-2px);
  }
  .finderIcon{
    width:40px;
    height:40px;
    object-fit:contain;
  }
  .finderItem span{ font-size:12px; }
  .finderPath{
    font-size:12px;
    opacity:.7;
    padding:10px 16px;
    background: rgba(0,0,0,.03);
    border-bottom:1px solid rgba(0,0,0,.06);
    color: rgba(0,0,0,.8);
  }
  .fileBadge{
    font-size:11px;
    opacity:.65;
    margin-top:-4px;
  }

  /* ===== Notes ===== */
  .app.notes{ width: min(820px, 94vw); }
  .notesWrap{
    display:flex;
    min-height:400px;
    height:min(58vh,580px);
    background: rgba(250,250,252,.95);
  }
  .notesSidebar{
    width:220px;
    border-right:1px solid rgba(0,0,0,.08);
    background: rgba(245,245,248,.95);
    padding:12px;
  }
  .notesSideTitle{
    font-size:12px;
    opacity:.7;
    margin-bottom:8px;
    color: rgba(0,0,0,.8);
  }
  .notesItem{
    background: rgba(0,0,0,.04);
    border:1px solid rgba(0,0,0,.06);
    border-radius:6px;
    padding:10px;
    color: rgba(0,0,0,.9);
  }
  .notesEditor{
    flex:1;
    padding:16px;
    color: rgba(0,0,0,.9);
  }
  .notePaper{
    background: rgba(255,255,255,.8);
    border-radius:6px;
    padding:16px;
    border:1px solid rgba(0,0,0,.08);
    color: rgba(0,0,0,.9);
  }

  /* ===== Game ===== */
  .app.game{ width: min(780px, 96vw); }
  .gameWrap{ padding:16px; text-align:left; }
  .gameTop{
    display:flex;
    justify-content:space-between;
    margin-bottom:10px;
    font-size:13px;
    color: rgba(0,0,0,.85);
  }
  canvas#dinoCanvas{
    width:100%;
    height:220px;
    border-radius:6px;
    border:1px solid rgba(0,0,0,.12);
    background: rgba(245,245,248,.95);
    box-shadow: 0 4px 16px rgba(0,0,0,.1);
  }
  .gameHint{ margin-top:10px; font-size:12px; opacity:.7; color: rgba(0,0,0,.7); }

  /* ===== Player ===== */
  .player{ padding:16px; text-align:left; }
  .playerBar{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    padding:10px 12px;
    border-radius:6px;
    background: rgba(0,0,0,.04);
    border:1px solid rgba(0,0,0,.08);
  }
  .now{ min-width:0; }
  .now .title{
    font-size:13px;
    font-weight:700;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    color: rgba(0,0,0,.9);
  }
  .now .meta{ font-size:12px; opacity:.7; margin-top:2px; color: rgba(0,0,0,.7); }
  .ctrl{ display:flex; gap:8px; }
  .mbtn{
    width:32px; height:32px;
    border-radius:6px;
    border:1px solid rgba(0,0,0,.12);
    background: rgba(0,0,0,.04);
    color: rgba(0,0,0,.8);
    cursor:pointer;
    display:grid;
    place-items:center;
    transition:.12s ease;
  }
  .mbtn:hover{ background: rgba(0,0,0,.08); }
  .mbtn.on{ background: rgba(80,150,255,.6); color: rgba(255,255,255,.95); }
  .playBig{ width:40px; height:40px; font-weight:700; }
  .vol{ display:flex; gap:8px; min-width:140px; align-items:center; }
  .vol span{ font-size:12px; }
  .vol input[type="range"]{ width:100px; }
  .progress{
    margin-top:12px;
    padding:10px 12px;
    border-radius:6px;
    background: rgba(0,0,0,.02);
    border:1px solid rgba(0,0,0,.06);
  }
  .pbar{
    height:8px;
    border-radius:4px;
    background: rgba(0,0,0,.06);
    overflow:hidden;
    cursor:pointer;
  }
  .pfill{
    height:100%;
    width:0%;
    background: rgba(80,150,255,.9);
    border-radius:4px;
  }
  .timeRow{
    display:flex;
    justify-content:space-between;
    font-size:12px;
    opacity:.7;
    margin-top:6px;
    color: rgba(0,0,0,.7);
  }
  .trackList{
    margin-top:12px;
    border-radius:6px;
    overflow:hidden;
    border:1px solid rgba(0,0,0,.08);
    background: rgba(0,0,0,.02);
  }
  .track{
    display:flex;
    justify-content:space-between;
    padding:12px;
    cursor:pointer;
    border-bottom:1px solid rgba(0,0,0,.06);
    transition:.12s ease;
  }
  .track:last-child{ border-bottom:0; }
  .track .left{ min-width:0; }
  .track .name{
    font-size:13px;
    font-weight:600;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    color: rgba(0,0,0,.9);
  }
  .track .sub{ font-size:12px; opacity:.65; margin-top:2px; color: rgba(0,0,0,.65); }
  .track .right{ font-size:12px; opacity:.7; color: rgba(0,0,0,.7); }
  .track:hover{ background: rgba(0,0,0,.04); }
  .track.active{ background: rgba(80,150,255,.15); }
  .playerHint{ margin-top:10px; font-size:12px; opacity:.7; color: rgba(0,0,0,.7); }

  /* ===== iCloud Photos ===== */
  .icloudTop{
    padding:12px 16px;
    border-bottom:1px solid rgba(0,0,0,.08);
    display:flex;
    justify-content:space-between;
    gap:12px;
  }
  .icloudH1{ font-size:14px; font-weight:800; color: rgba(0,0,0,.9); }
  .icloudTabs{
    margin-top:8px;
    display:flex;
    gap:6px;
  }
  .icloudTab{
    border:1px solid rgba(0,0,0,.12);
    background: rgba(0,0,0,.04);
    padding:6px 12px;
    border-radius:4px;
    cursor:pointer;
    font-size:12px;
    transition:.12s ease;
    color: rgba(0,0,0,.8);
  }
  .icloudTab:hover{ background: rgba(0,0,0,.06); }
  .icloudTab.active{
    background: rgba(80,150,255,.6);
    border-color: rgba(80,150,255,.8);
    color: rgba(255,255,255,.95);
  }
  .icloudSearch{
    width:min(240px, 40vw);
    border:1px solid rgba(0,0,0,.12);
    background: rgba(255,255,255,.6);
    color: rgba(0,0,0,.9);
    padding:8px 12px;
    border-radius:4px;
    outline:none;
  }
  .icloudGrid{
    padding:16px;
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap:10px;
  }
  .photoTile{
    aspect-ratio:1/1;
    border-radius:6px;
    overflow:hidden;
    background: rgba(0,0,0,.04);
    border:1px solid rgba(0,0,0,.08);
    cursor:pointer;
    transition:.12s ease;
  }
  .photoTile:hover{ transform: scale(1.02); }
  .photoTile img{
    width:100%;
    height:100%;
    object-fit:cover;
  }
  .photoTile.loading{
    cursor:default;
    background: linear-gradient(90deg, rgba(0,0,0,.02), rgba(0,0,0,.06), rgba(0,0,0,.02));
    background-size:240px 100%;
    animation: shimmer 1.2s infinite linear;
  }
  @keyframes shimmer{
    0%{ background-position:-240px 0; }
    100%{ background-position:240px 0; }
  }

  .icloudViewer{
    position:fixed;
    inset:0;
    z-index:5000;
    background: rgba(0,0,0,.85);
    backdrop-filter: blur(16px);
    display:none;
  }
  .icloudViewer.open{ display:block; }
  .icloudViewerTop{
    height:48px;
    padding:0 16px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    border-bottom:1px solid rgba(255,255,255,.1);
    background: rgba(30,30,35,.95);
  }
  .icloudViewerBtn{
    border:1px solid rgba(255,255,255,.15);
    background: rgba(255,255,255,.1);
    color: rgba(255,255,255,.95);
    padding:8px 16px;
    border-radius:4px;
    cursor:pointer;
    font-weight:600;
    font-size:12px;
    transition:.12s ease;
  }
  .icloudViewerBtn:hover{ background: rgba(255,255,255,.15); }
  .icloudViewerTitle{ font-size:13px; font-weight:700; color: rgba(255,255,255,.95); }
  .icloudViewerBody{
    height:calc(100vh - 48px);
    display:grid;
    place-items:center;
    padding:16px;
  }
  .icloudViewerBody img{
    max-width:min(960px, 94vw);
    max-height:min(700px, 80vh);
    border-radius:6px;
    box-shadow: 0 20px 80px rgba(0,0,0,.7);
    object-fit:contain;
  }

  /* ===== Mobile block ===== */
  .mobileBlock{
    position:fixed;
    inset:0;
    z-index:9999;
    display:none;
    padding:20px;
    background:
      radial-gradient(800px 500px at 20% 20%, rgba(80,120,255,.18), transparent 60%),
      linear-gradient(180deg,#0a0c14,#050507);
  }
  .mobileBlockCard{
    max-width:480px;
    margin:0 auto;
    border-radius:8px;
    border:1px solid rgba(255,255,255,.15);
    background: rgba(40,40,45,.95);
    box-shadow: 0 30px 90px rgba(0,0,0,.6);
    padding:20px;
  }
  .mobileH1{ font-size:18px; margin:0 0 12px; }
  .mobileP{ margin:0 0 16px; line-height:1.4; font-size:14px; }
  .mobileActions{ display:flex; gap:10px; flex-wrap:wrap; }
  .mobileBtn{
    border:1px solid rgba(255,255,255,.18);
    background: rgba(255,255,255,.12);
    color: var(--text);
    padding:10px 16px;
    border-radius:4px;
    cursor:pointer;
    font-weight:600;
    font-size:13px;
    transition:.12s ease;
  }
  .mobileBtn:hover{ background: rgba(255,255,255,.18); }
  .mobileBtn.primary{
    background: rgba(88,101,242,.9);
    border-color: rgba(255,255,255,.2);
  }
  .mobileBtn.primary:hover{ background: rgba(88,101,242,1); }
  .mobileMeta{ font-size:12px; opacity:.65; margin-top:12px; }

  @media (max-width:520px){
    .finderGrid{ grid-template-columns: repeat(3, minmax(90px, 1fr)); }
    .icloudGrid{ grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); }
    .taskbar-app{ min-width:120px; }
  }

  @media (prefers-reduced-motion: reduce){
    .app, .menuWrap{ transition:none !important; }
  }
</style>
</head>

<body>
  <!-- Mobile block -->
  <div class="mobileBlock" id="mobileBlock">
    <div class="mobileBlockCard">
      <div class="mobileH1">Nieznane urzƒÖdzenie</div>
      <p class="mobileP">
        Ta strona jest zrobiona pod desktop. Na telefonie wyglƒÖda s≈Çabo i czƒô≈õƒá rzeczy nie dzia≈Ça jak trzeba.
        Wejd≈∫ proszƒô na komputerze.
      </p>
      <div class="mobileActions">
        <button class="mobileBtn primary" id="copyLinkBtn">Skopiuj link</button>
        <button class="mobileBtn" id="continueAnywayBtn">Kontynuuj mimo to</button>
      </div>
      <div class="mobileMeta" id="mobileMeta"></div>
    </div>
  </div>

  <div class="wallpaper"></div>
  <div class="brandBlur"></div>
  <div class="grain"></div>

  <!-- Desktop icons -->
  <div class="icons">
    <div class="icon" id="driveLauncher">
      <div class="pic"><img src="drive.png" alt="" class="deskIconImg"></div>
      <div>Dysk</div>
    </div>

    <div class="icon" id="folderLauncher">
      <div class="pic"><img src="files.png" alt="" class="deskIconImg"></div>
      <div>Folder</div>
    </div>

    <div class="icon" id="appLauncher">
      <div class="pic"><img src="freewifi.png" alt="" class="deskIconImg"></div>
      <div>godwifi</div>
    </div>
  </div>

  <!-- Stage -->
  <div class="stage" id="stage">
    <!-- Main app window -->
    <section class="app" id="app">
      <div class="titlebar" data-drag="app">
        <div class="title">godwifi</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="appMin">‚àí</button>
          <button class="win-btn maximize" id="appMax">‚ñ°</button>
          <button class="win-btn close" id="appClose">√ó</button>
        </div>
      </div>

      <div class="content">
        <button class="logoBtn" id="toggle">
          <img class="logo" id="logo" src="freewifi.png" alt="godwifi logo">
        </button>
        <div class="hint" id="hint">Kliknij logo, aby rozwinƒÖƒá</div>

        <div class="menuWrap" id="menuWrap">
          <nav class="menu">
            <a href="https://instagram.com/tokarz_k" target="_blank" rel="noopener">Sprawd≈∫ Instagram Gumisia</a>
            <a href="https://instagram.com/god.wifi" target="_blank" rel="noopener">Sprawd≈∫ Instagram god.wifi</a>
            <a id="spotifyLink" href="#" target="_blank" rel="noopener">Sprawd≈∫ Spotify</a>
            <a id="discordLink" class="discord" href="#" target="_blank" rel="noopener">Wejd≈∫ na Discord</a>
          </nav>
        </div>
      </div>
    </section>

    <!-- Finder root -->
    <section class="app finder" id="finderWin">
      <div class="titlebar" data-drag="finderWin">
        <div class="title">Folder</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="finderMin">‚àí</button>
          <button class="win-btn maximize" id="finderMax">‚ñ°</button>
          <button class="win-btn close" id="finderClose">√ó</button>
        </div>
      </div>

      <div class="finderPath">~/</div>
      <div class="finderBody">
        <div class="finderGrid">
          <button class="finderItem" id="openKoncert">
            <img src="files.png" alt="" class="finderIcon">
            <span>koncert</span>
          </button>

          <button class="finderItem" id="openMix">
            <img src="files.png" alt="" class="finderIcon">
            <span>mix</span>
          </button>

          <button class="finderItem">
            <img src="files.png" alt="" class="finderIcon">
            <span>projekty</span>
          </button>

          <button class="finderItem">
            <img src="files.png" alt="" class="finderIcon">
            <span>grafika</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Koncert -->
    <section class="app finder" id="koncertWin">
      <div class="titlebar" data-drag="koncertWin">
        <div class="title">koncert</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="koncertMin">‚àí</button>
          <button class="win-btn maximize" id="koncertMax">‚ñ°</button>
          <button class="win-btn close" id="koncertClose">√ó</button>
        </div>
      </div>

      <div class="finderPath">~/koncert</div>
      <div class="finderBody">
        <div class="finderGrid">
          <button class="finderItem">
            <img src="files.png" alt="" class="finderIcon">
            <span>zdjƒôcia</span>
          </button>

          <button class="finderItem">
            <img src="files.png" alt="" class="finderIcon">
            <span>wideo</span>
          </button>

          <button class="finderItem" id="openSetlista">
            <img src="drive.png" alt="" class="finderIcon">
            <span>setlista</span>
            <div class="fileBadge">plik</div>
          </button>

          <button class="finderItem">
            <img src="drive.png" alt="" class="finderIcon">
            <span>info</span>
            <div class="fileBadge">plik</div>
          </button>
        </div>
      </div>
    </section>

    <!-- Notes -->
    <section class="app notes" id="notesWin">
      <div class="titlebar" data-drag="notesWin">
        <div class="title">Notatki</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="notesMin">‚àí</button>
          <button class="win-btn maximize" id="notesMax">‚ñ°</button>
          <button class="win-btn close" id="notesClose">√ó</button>
        </div>
      </div>

      <div class="notesWrap">
        <aside class="notesSidebar">
          <div class="notesSideTitle">Notatki</div>
          <div class="notesItem">
            <div>setlista</div>
            <div style="font-size:11px;opacity:.6;margin-top:4px;">warszawa, 7/11‚Ä¶</div>
          </div>
        </aside>

        <main class="notesEditor">
          <h2 style="margin:0 0 12px;font-size:16px;">setlista</h2>
          <div class="notePaper">
            <ol>
              <li>warszawa (2:32)</li>
              <li>7/11 (2:05)</li>
              <li>sweet (2:04)</li>
              <li>emoji (1:48)</li>
              <li>pingwin (2:24) ‚Äî ≈ªabson, Drabusheyka</li>
              <li>2late (2:17)</li>
              <li>hentai haze (1:39) ‚Äî Chlor</li>
              <li>moshpit (2:02)</li>
              <li>dj (1:46)</li>
              <li>usa (2:09)</li>
              <li>sms (2:49)</li>
              <li>pijama party (1:38)</li>
              <li>everyday (1:37)</li>
              <li>twilight zone (1:39)</li>
              <li><strong>free wifi</strong> (1:48)</li>
            </ol>
          </div>
        </main>
      </div>
    </section>

    <!-- Mix player -->
    <section class="app finder" id="mixWin">
      <div class="titlebar" data-drag="mixWin">
        <div class="title">mix</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="mixMin">‚àí</button>
          <button class="win-btn maximize" id="mixMax">‚ñ°</button>
          <button class="win-btn close" id="mixClose">√ó</button>
        </div>
      </div>

      <div class="player">
        <div class="playerBar">
          <div class="now">
            <div class="title" id="mixNowTitle">‚Äî</div>
            <div class="meta" id="mixNowMeta">20s preview ¬∑ Space ¬∑ ‚Üê/‚Üí ¬∑ S ¬∑ R</div>
          </div>

          <div class="ctrl">
            <button class="mbtn" id="mixShuffle" title="Shuffle (S)">S</button>
            <button class="mbtn" id="mixPrev" title="Previous (‚Üê)">‚óÄÔ∏é</button>
            <button class="mbtn playBig" id="mixPlay" title="Play/Pause (Space)">‚ñ∂Ô∏é</button>
            <button class="mbtn" id="mixNext" title="Next (‚Üí)">‚ñ∂Ô∏é</button>
            <button class="mbtn" id="mixRepeat" title="Repeat (R)">R</button>
          </div>

          <div class="vol">
            <span>üîä</span>
            <input id="mixVol" type="range" min="0" max="1" step="0.01" value="0.85" />
          </div>
        </div>

        <div class="progress">
          <div class="pbar" id="mixPbar">
            <div class="pfill" id="mixPfill"></div>
          </div>
          <div class="timeRow">
            <span id="mixTcur">0:00</span>
            <span id="mixTend">0:20</span>
          </div>
        </div>

        <div class="trackList" id="mixList"></div>
        <div class="playerHint">Play startuje dopiero po klikniƒôciu. Zamkniƒôcie/minimalizacja zatrzymuje muzykƒô.</div>
        <audio id="mixAudio" preload="metadata"></audio>
      </div>
    </section>

    <!-- Drive -->
    <section class="app finder" id="driveWin">
      <div class="titlebar" data-drag="driveWin">
        <div class="title">Dysk</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="driveMin">‚àí</button>
          <button class="win-btn maximize" id="driveMax">‚ñ°</button>
          <button class="win-btn close" id="driveClose">√ó</button>
        </div>
      </div>

      <div class="finderPath">~/Dysk</div>
      <div class="finderBody">
        <div class="finderGrid">
          <button class="finderItem" id="openIcloudPhotos">
            <img src="Galeria iCloud ikona.png" alt="" class="finderIcon">
            <span>Galeria iCloud</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Photos -->
    <section class="app finder" id="photosWin">
      <div class="titlebar" data-drag="photosWin">
        <div class="title">iCloud Photos</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="photosMin">‚àí</button>
          <button class="win-btn maximize" id="photosMax">‚ñ°</button>
          <button class="win-btn close" id="photosClose">√ó</button>
        </div>
      </div>

      <div class="icloudTop">
        <div>
          <div class="icloudH1">Zdjƒôcia</div>
          <div class="icloudTabs">
            <button class="icloudTab active" data-tab="recent">Ostatnie</button>
            <button class="icloudTab" data-tab="albums">Albumy</button>
            <button class="icloudTab" data-tab="shared">Udostƒôpnione</button>
          </div>
        </div>
        <input class="icloudSearch" id="icloudSearch" placeholder="Szukaj">
      </div>

      <div class="icloudGrid" id="icloudGrid"></div>
    </section>

    <!-- Game -->
    <section class="app game" id="gameWin">
      <div class="titlebar" data-drag="gameWin">
        <div class="title">Wi-Fi Runner</div>
        <div class="window-controls">
          <button class="win-btn minimize" id="gameMin">‚àí</button>
          <button class="win-btn maximize" id="gameMax">‚ñ°</button>
          <button class="win-btn close" id="gameClose">√ó</button>
        </div>
      </div>

      <div class="gameWrap">
        <div class="gameTop">
          <div>Score: <span id="score">0</span> ¬∑ Best: <span id="best">0</span></div>
          <div id="gameState">Kliknij / Space aby start</div>
        </div>
        <canvas id="dinoCanvas" width="900" height="260"></canvas>
        <div class="gameHint">Sterowanie: <b>Space</b> / <b>‚Üë</b> / klik ‚Äî skok. Po przegranej: Space aby restart.</div>
      </div>
    </section>
  </div>

  <!-- iCloud viewer -->
  <div class="icloudViewer" id="icloudViewer">
    <div class="icloudViewerTop">
      <button class="icloudViewerBtn" id="icloudViewerClose">Gotowe</button>
      <div class="icloudViewerTitle" id="icloudViewerTitle">Zdjƒôcie</div>
      <div style="width:72px;"></div>
    </div>
    <div class="icloudViewerBody">
      <img id="icloudViewerImg" alt="">
    </div>
  </div>

  <!-- Windows-style Taskbar -->
  <div class="taskbar">
    <div class="taskbar-left">
      <div class="start-btn" id="startBtn" title="Start">‚äû</div>
      
      <div class="taskbar-app" id="taskApp" style="display:none;">
        <img src="freewifi.png" class="taskbar-icon" alt="">
        <span>godwifi</span>
      </div>

      <div class="taskbar-app" id="taskFinder" style="display:none;">
        <img src="files.png" class="taskbar-icon" alt="">
        <span>Folder</span>
      </div>

      <div class="taskbar-app" id="taskGame" style="display:none;">
        <span>üéÆ</span>
        <span>Wi-Fi Runner</span>
      </div>
    </div>

    <div class="taskbar-right">
      <div class="system-tray">
        <div class="tray-icon" id="wifiBtn" title="Wi-Fi Runner">
          <span class="wifi-icon">
            <span class="wifi-dot"></span>
          </span>
        </div>
        
        <div class="battery" id="battery">
          <div class="batteryIcon">
            <div class="batteryLevel" id="batteryLevel"></div>
            <div class="batteryCap"></div>
            <div class="batteryBolt" id="batteryBolt">‚ö°</div>
          </div>
          <div style="font-variant-numeric: tabular-nums;" id="batteryPct">--%</div>
        </div>

        <div id="clock" style="font-variant-numeric: tabular-nums;"></div>
      </div>
    </div>
  </div>

  <script>
  // ====== MAINTENANCE MODE ======
  const MAINTENANCE = true;
  const PASSWORD = "g0dwifi";

  function isUnlocked() {
    const params = new URLSearchParams(location.search);
    if (params.get("unlock") === PASSWORD) return true;
    if (localStorage.getItem("godwifi_unlocked") === "1") return true;
    return false;
  }

  function showLockScreen() {
    document.documentElement.style.background = "#0b0b0c";
    document.body.innerHTML = `
      <div style="
        min-height:100vh; display:grid; place-items:center;
        font-family: 'Segoe UI', Ubuntu, Arial, sans-serif;
        color: rgba(255,255,255,.92);
        background: radial-gradient(800px 500px at 20% 20%, rgba(80,120,255,.2), transparent 60%),
                    linear-gradient(180deg,#0a0c14,#050507);
      ">
        <div style="
          width:min(420px,92vw);
          padding:24px 20px;
          border-radius:8px;
          background: rgba(40,40,45,.95);
          border:1px solid rgba(255,255,255,.15);
          backdrop-filter: blur(18px);
          box-shadow: 0 30px 90px rgba(0,0,0,.6);
          text-align:center;
        ">
          <div style="font-size:14px; opacity:.85; margin-bottom:8px;">godwifi</div>
          <div style="font-size:18px; font-weight:700; margin-bottom:10px;">Tryb test√≥w</div>
          <div style="font-size:13px; opacity:.75; margin-bottom:16px;">
            Strona chwilowo niedostƒôpna. Je≈õli masz dostƒôp, wpisz has≈Ço.
          </div>

          <input id="pw" type="password" placeholder="Has≈Ço"
            style="
              width:100%; padding:12px; border-radius:6px;
              border:1px solid rgba(255,255,255,.15);
              background: rgba(255,255,255,.08);
              color: rgba(255,255,255,.92);
              outline:none;
            " />

          <button id="go"
            style="
              width:100%; margin-top:10px; padding:12px;
              border-radius:6px; border:1px solid rgba(255,255,255,.15);
              background: rgba(255,255,255,.14);
              color: rgba(255,255,255,.92);
              font-weight:700;
              cursor:pointer;
            "
          >Wejd≈∫</button>

          <div id="err" style="margin-top:10px; font-size:12px; opacity:.7;"></div>
        </div>
      </div>
    `;

    const pw = document.getElementById("pw");
    const go = document.getElementById("go");
    const err = document.getElementById("err");

    function attempt() {
      if (pw.value === PASSWORD) {
        localStorage.setItem("godwifi_unlocked", "1");
        location.href = location.origin + location.pathname;
      } else {
        err.textContent = "Z≈Çe has≈Ço.";
      }
    }

    go.addEventListener("click", attempt);
    pw.addEventListener("keydown", (e) => {
      if (e.key === "Enter") attempt();
    });
  }

  if (MAINTENANCE && !isUnlocked()) {
    document.addEventListener("DOMContentLoaded", showLockScreen);
  }
</script>

<script>
  // ===== Mobile blocker =====
  (function(){
    const block = document.getElementById("mobileBlock");
    if (!block) return;

    const meta = document.getElementById("mobileMeta");
    const btnCopy = document.getElementById("copyLinkBtn");
    const btnContinue = document.getElementById("continueAnywayBtn");

    const ua = navigator.userAgent || "";
    const isTouch = navigator.maxTouchPoints > 0;
    const smallScreen = Math.min(window.innerWidth, window.innerHeight) <= 820;
    const isMobileLike = /Android|iPhone|iPad|iPod|Windows Phone/i.test(ua) || (isTouch && smallScreen);

    function show(){
      block.style.display = "block";
      document.body.style.overflow = "hidden";
    }

    function hide(){
      block.style.display = "none";
      document.body.style.overflow = "hidden";
    }

    if (isMobileLike){
      const device = /iPhone|iPad|iPod/i.test(ua) ? "iOS" :
                     /Android/i.test(ua) ? "Android" : "Mobile";
      meta.textContent = `Wykryto: ${device} ¬∑ ${window.innerWidth}√ó${window.innerHeight}`;
      show();
    }

    btnContinue?.addEventListener("click", () => hide());

    btnCopy?.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(location.href);
        btnCopy.textContent = "Skopiowano ‚úÖ";
        setTimeout(()=> btnCopy.textContent = "Skopiuj link", 1400);
      }catch(e){
        prompt("Skopiuj link:", location.href);
      }
    });
  })();

  // ===== LINKS =====
  const IG_GUMIS = "https://instagram.com/tokarz_k";
  const IG_GODWIFI = "https://instagram.com/god.wifi";
  const SPOTIFY_URL = "https://open.spotify.com/artist/6iz52ADwFl483ghAI7NuS1?si=V1A-TzIoRNqL1iQ_ptCGng";
  const DISCORD_URL = "https://discord.gg/4PTQRsUq9t";

  document.getElementById("spotifyLink").href = SPOTIFY_URL;
  document.getElementById("discordLink").href = DISCORD_URL;

  const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  // ===== Clock =====
  const clock = document.getElementById("clock");
  function tick(){
    const d = new Date();
    const hh = String(d.getHours()).padStart(2,"0");
    const mm = String(d.getMinutes()).padStart(2,"0");
    clock.textContent = `${hh}:${mm}`;
  }
  tick();
  setInterval(tick, 10000);

  // ===== Battery =====
  const batteryLevelEl = document.getElementById("batteryLevel");
  const batteryPctEl = document.getElementById("batteryPct");
  const batteryBoltEl = document.getElementById("batteryBolt");

  function batteryModelByHour(h){
    let pct = 100;
    let charging = false;

    // Charging: 22:00 (10 PM) to 08:00 (8 AM)
    // Discharging: 08:00 (8 AM) to 22:00 (10 PM)
    
    if (h >= 22 || h < 8){
      // Charging period
      charging = true;
      if (h >= 22) {
        // 22:00 - 23:59 (2 hours into night)
        const hoursCharging = h - 22;
        pct = Math.min(100, 20 + hoursCharging * 15);
      } else {
        // 00:00 - 07:59 (continuing charge)
        const hoursCharging = (24 - 22) + h; // hours since 22:00
        pct = Math.min(100, 20 + hoursCharging * 8);
      }
    } else {
      // Discharging period: 08:00 to 22:00 (14 hours total)
      charging = false;
      const hoursSinceStart = h - 8;
      // Start at 100%, end at ~12%
      pct = Math.round(100 - (hoursSinceStart / 14) * 88);
    }

    pct = Math.max(1, Math.min(100, pct));
    return { pct, charging };
  }

  function renderBattery(){
    const h = new Date().getHours();
    const { pct, charging } = batteryModelByHour(h);

    batteryLevelEl.style.width = pct + "%";
    batteryPctEl.textContent = pct + "%";
    
    // Show/hide charging bolt
    batteryBoltEl.style.opacity = charging ? "1" : "0";

    // Color based on percentage
    if (pct < 15) batteryLevelEl.style.background = "rgba(255,59,48,.9)";
    else if (pct < 35) batteryLevelEl.style.background = "rgba(255,149,0,.9)";
    else batteryLevelEl.style.background = "rgba(52,199,89,.9)";
  }
  renderBattery();
  setInterval(renderBattery, 30000);

  // ===== Window system =====
  const stage = document.getElementById("stage");
  const TASKBAR_SAFE = 48 + 10;

  let zCounter = 300;
  function bringToFront(win){
    zCounter += 1;
    win.style.zIndex = String(zCounter);
  }

  function resetToCenter(win){
    win.style.setProperty("--x", "0px");
    win.style.setProperty("--y", "0px");
  }

  function openWindow(win, fromEl){
    bringToFront(win);
    win.classList.add("open");
    resetToCenter(win);
  }

  function minimizeWindow(win, toEl, afterFn){
    if (!win.classList.contains("open")) return;
    win.classList.remove("open");
    resetToCenter(win);
    if (afterFn) afterFn();
  }

  function toggleWindow(win, fromEl, onClose){
    if (win.classList.contains("open")){
      minimizeWindow(win, fromEl, onClose);
    } else {
      openWindow(win, fromEl);
    }
  }

  function makeDraggable(titlebarEl){
    const id = titlebarEl.getAttribute("data-drag");
    const win = document.getElementById(id);

    let dragging = false;
    let startX = 0, startY = 0;
    let baseX = 0, baseY = 0;

    function getVarPx(name){
      const v = getComputedStyle(win).getPropertyValue(name).trim();
      return v ? parseFloat(v.replace("px","")) : 0;
    }
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    titlebarEl.addEventListener("pointerdown", (e)=>{
      if (!win.classList.contains("open")) return;
      if (e.target && e.target.classList && e.target.classList.contains("win-btn")) return;

      dragging = true;
      bringToFront(win);

      titlebarEl.setPointerCapture(e.pointerId);
      win.classList.add("dragging");

      startX = e.clientX;
      startY = e.clientY;
      baseX = getVarPx("--x");
      baseY = getVarPx("--y");
    });

    titlebarEl.addEventListener("pointermove", (e)=>{
      if (!dragging) return;

      const dx = e.clientX - startX;
      const dy = e.clientY - startY;

      const maxX = (window.innerWidth / 2) - 80;
      const maxY = (window.innerHeight / 2) - 80;

      let nx = clamp(baseX + dx, -maxX, maxX);
      let ny = clamp(baseY + dy, -maxY, maxY);

      win.style.setProperty("--x", nx + "px");
      win.style.setProperty("--y", ny + "px");
    });

    function stop(){
      dragging = false;
      win.classList.remove("dragging");
    }
    titlebarEl.addEventListener("pointerup", stop);
    titlebarEl.addEventListener("pointercancel", stop);

    win.addEventListener("pointerdown", ()=> bringToFront(win));
  }
  document.querySelectorAll(".titlebar[data-drag]").forEach(makeDraggable);

  // ===== Wire window controls =====
  function wireWindowControls(prefix, win, launcherEl, onClose){
    const closeBtn = document.getElementById(prefix+"Close");
    const minBtn = document.getElementById(prefix+"Min");
    const maxBtn = document.getElementById(prefix+"Max");

    let maxed = false;

    if (closeBtn) closeBtn.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(win, launcherEl, onClose); });
    if (minBtn) minBtn.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(win, launcherEl, onClose); });
    if (maxBtn) maxBtn.addEventListener("click", (e)=>{
      e.stopPropagation();
      if (!win.classList.contains("open")) return;
      maxed = !maxed;
      if (win.classList.contains("game")){
        win.style.width = maxed ? "min(940px, 96vw)" : "min(780px, 96vw)";
      } else if (win.classList.contains("finder")){
        win.style.width = maxed ? "min(940px, 94vw)" : "min(720px, 92vw)";
      } else if (win.classList.contains("notes")){
        win.style.width = maxed ? "min(980px, 96vw)" : "min(820px, 94vw)";
      } else {
        win.style.width = maxed ? "min(800px, 94vw)" : "min(600px, 90vw)";
      }
      resetToCenter(win);
    });
  }

  // ===== Windows =====
  const app = document.getElementById("app");
  const finderWin = document.getElementById("finderWin");
  const koncertWin = document.getElementById("koncertWin");
  const mixWin = document.getElementById("mixWin");
  const gameWin = document.getElementById("gameWin");
  const notesWin = document.getElementById("notesWin");
  const driveWin = document.getElementById("driveWin");
  const photosWin = document.getElementById("photosWin");

  const appLauncher = document.getElementById("appLauncher");
  const folderLauncher = document.getElementById("folderLauncher");
  const driveLauncher = document.getElementById("driveLauncher");
  const wifiBtn = document.getElementById("wifiBtn");
  const startBtn = document.getElementById("startBtn");

  const taskApp = document.getElementById("taskApp");
  const taskFinder = document.getElementById("taskFinder");
  const taskGame = document.getElementById("taskGame");

  wireWindowControls("app", app, appLauncher, ()=>{ setOpen(false); taskApp.style.display = "none"; });
  wireWindowControls("finder", finderWin, folderLauncher, ()=>{ taskFinder.style.display = "none"; });
  wireWindowControls("koncert", koncertWin, folderLauncher);
  wireWindowControls("mix", mixWin, folderLauncher, ()=> stopMix(true));
  wireWindowControls("game", gameWin, wifiBtn, ()=>{ taskGame.style.display = "none"; });
  wireWindowControls("notes", notesWin, folderLauncher);
  wireWindowControls("drive", driveWin, driveLauncher);
  wireWindowControls("photos", photosWin, driveLauncher);

  // ===== Launchers =====
  const toggle = document.getElementById("toggle");
  const menuWrap = document.getElementById("menuWrap");
  const hint = document.getElementById("hint");

  function setOpen(open){
    menuWrap.classList.toggle("open", open);
    hint.textContent = open ? "Wybierz link" : "Kliknij logo, aby rozwinƒÖƒá";
  }

  toggle.addEventListener("click", ()=> setOpen(!menuWrap.classList.contains("open")));

  startBtn.addEventListener("click", ()=>{
    toggleWindow(app, startBtn, ()=>{ setOpen(false); taskApp.style.display = "none"; });
    if (app.classList.contains("open")){
      taskApp.style.display = "flex";
      taskApp.classList.add("active");
    }
  });

  appLauncher.addEventListener("click", ()=>{
    toggleWindow(app, appLauncher, ()=>{ setOpen(false); taskApp.style.display = "none"; });
    if (app.classList.contains("open")){
      taskApp.style.display = "flex";
      taskApp.classList.add("active");
    }
  });

  folderLauncher.addEventListener("click", ()=>{
    toggleWindow(finderWin, folderLauncher, ()=>{ taskFinder.style.display = "none"; });
    if (finderWin.classList.contains("open")){
      taskFinder.style.display = "flex";
      taskFinder.classList.add("active");
    }
  });

  driveLauncher.addEventListener("click", ()=>{
    toggleWindow(driveWin, driveLauncher);
  });

  wifiBtn.addEventListener("click", ()=>{
    toggleWindow(gameWin, wifiBtn, ()=>{ taskGame.style.display = "none"; });
    if (gameWin.classList.contains("open")){
      taskGame.style.display = "flex";
      taskGame.classList.add("active");
      startOrResumeGame();
    }
  });

  taskApp.addEventListener("click", ()=> toggleWindow(app, appLauncher, ()=>{ setOpen(false); taskApp.style.display = "none"; }));
  taskFinder.addEventListener("click", ()=> toggleWindow(finderWin, folderLauncher, ()=>{ taskFinder.style.display = "none"; }));
  taskGame.addEventListener("click", ()=> toggleWindow(gameWin, wifiBtn, ()=>{ taskGame.style.display = "none"; }));

  const openKoncert = document.getElementById("openKoncert");
  const openMix = document.getElementById("openMix");
  const openSetlista = document.getElementById("openSetlista");
  const openIcloudPhotos = document.getElementById("openIcloudPhotos");

  openKoncert.addEventListener("click", ()=>{
    if (!finderWin.classList.contains("open")) openWindow(finderWin, folderLauncher);
    toggleWindow(koncertWin, folderLauncher);
  });

  openMix.addEventListener("click", ()=>{
    if (!finderWin.classList.contains("open")) openWindow(finderWin, folderLauncher);
    toggleWindow(mixWin, folderLauncher, ()=> stopMix(true));
  });

  openSetlista.addEventListener("click", ()=> toggleWindow(notesWin, openSetlista));

  openIcloudPhotos.addEventListener("click", ()=>{
    if (!driveWin.classList.contains("open")) openWindow(driveWin, driveLauncher);
    openWindow(photosWin, openIcloudPhotos);
    buildIcloudGrid();
  });

  // ===== MIX PLAYER =====
  const MIX_PREVIEW_SECONDS = 20;
  const MIX_TRACKS = [
    { title: "Utw√≥r 1", src: "mix1.mp3" },
    { title: "Utw√≥r 2", src: "mix2.mp3" },
    { title: "Utw√≥r 3", src: "mix3.mp3" },
    { title: "Utw√≥r 4", src: "mix4.mp3" },
    { title: "Utw√≥r 5", src: "mix5.mp3" },
    { title: "Utw√≥r 6", src: "mix6.mp3" },
    { title: "Utw√≥r 7", src: "mix7.mp3" },
    { title: "Utw√≥r 8", src: "mix8.mp3" },
    { title: "Utw√≥r 9", src: "mix9.mp3" },
  ];

  const mixAudio = document.getElementById("mixAudio");
  const mixNowTitle = document.getElementById("mixNowTitle");
  const mixList = document.getElementById("mixList");
  const mixPlay = document.getElementById("mixPlay");
  const mixPrev = document.getElementById("mixPrev");
  const mixNext = document.getElementById("mixNext");
  const mixShuffleBtn = document.getElementById("mixShuffle");
  const mixRepeatBtn = document.getElementById("mixRepeat");
  const mixVol = document.getElementById("mixVol");
  const mixPbar = document.getElementById("mixPbar");
  const mixPfill = document.getElementById("mixPfill");
  const mixTcur = document.getElementById("mixTcur");
  const mixTend = document.getElementById("mixTend");

  let mixIndex = 0;
  let mixShuffle = false;
  let mixRepeat = false;
  let mixOrder = [...Array(MIX_TRACKS.length).keys()];

  function reshuffle(){
    mixOrder = [...Array(MIX_TRACKS.length).keys()];
    for (let i = mixOrder.length - 1; i > 0; i--){
      const j = Math.floor(Math.random() * (i + 1));
      [mixOrder[i], mixOrder[j]] = [mixOrder[j], mixOrder[i]];
    }
    if (!mixOrder.includes(mixIndex)) mixOrder[0] = mixIndex;
  }

  function fmt(sec){
    const s = Math.max(0, Math.min(MIX_PREVIEW_SECONDS, sec));
    const m = Math.floor(s/60);
    const ss = String(Math.floor(s%60)).padStart(2,"0");
    return `${m}:${ss}`;
  }

  function setMixButtons(){
    mixShuffleBtn.classList.toggle("on", mixShuffle);
    mixRepeatBtn.classList.toggle("on", mixRepeat);
    mixPlay.textContent = mixAudio.paused ? "‚ñ∂Ô∏é" : "‚ùö‚ùö";
  }

  function renderMixList(){
    mixList.innerHTML = "";
    MIX_TRACKS.forEach((t,i)=>{
      const row = document.createElement("div");
      row.className = "track" + (i===mixIndex ? " active":"");
      row.innerHTML = `
        <div class="left">
          <div class="name">${t.title}</div>
          <div class="sub">20s preview</div>
        </div>
        <div class="right">${(i===mixIndex && !mixAudio.paused) ? "PLAYING" : ""}</div>
      `;
      row.addEventListener("click", ()=> loadMix(i, true));
      mixList.appendChild(row);
    });
  }

  function updateMixProgressUI(){
    const t = Math.min(mixAudio.currentTime || 0, MIX_PREVIEW_SECONDS);
    const pct = (t / MIX_PREVIEW_SECONDS) * 100;
    mixPfill.style.width = pct + "%";
    mixTcur.textContent = fmt(t);
    mixTend.textContent = fmt(MIX_PREVIEW_SECONDS);
  }

  function loadMix(i, autoplay=false){
    mixIndex = (i + MIX_TRACKS.length) % MIX_TRACKS.length;
    const t = MIX_TRACKS[mixIndex];
    mixNowTitle.textContent = t.title;
    mixAudio.src = t.src;
    mixAudio.currentTime = 0;
    renderMixList();
    setMixButtons();
    updateMixProgressUI();
    if (autoplay) playMix();
  }

  function playMix(){
    mixAudio.currentTime = Math.min(mixAudio.currentTime, MIX_PREVIEW_SECONDS);
    mixAudio.play();
    setMixButtons();
    renderMixList();
  }

  function pauseMix(){
    mixAudio.pause();
    setMixButtons();
    renderMixList();
  }

  function stopMix(reset=false){
    mixAudio.pause();
    if (reset){
      mixAudio.currentTime = 0;
      updateMixProgressUI();
    }
    setMixButtons();
    renderMixList();
  }

  function nextIndex(){
    if (!mixShuffle) return (mixIndex + 1) % MIX_TRACKS.length;
    const pos = mixOrder.indexOf(mixIndex);
    return mixOrder[(pos + 1) % mixOrder.length];
  }

  function prevIndex(){
    if (!mixShuffle) return (mixIndex - 1 + MIX_TRACKS.length) % MIX_TRACKS.length;
    const pos = mixOrder.indexOf(mixIndex);
    return mixOrder[(pos - 1 + mixOrder.length) % mixOrder.length];
  }

  mixPlay.addEventListener("click", ()=>{
    if (mixAudio.paused) playMix();
    else pauseMix();
  });
  mixNext.addEventListener("click", ()=> loadMix(nextIndex(), true));
  mixPrev.addEventListener("click", ()=> loadMix(prevIndex(), true));

  mixShuffleBtn.addEventListener("click", ()=>{
    mixShuffle = !mixShuffle;
    if (mixShuffle) reshuffle();
    setMixButtons();
  });

  mixRepeatBtn.addEventListener("click", ()=>{
    mixRepeat = !mixRepeat;
    setMixButtons();
  });

  mixVol.addEventListener("input", ()=>{
    mixAudio.volume = Number(mixVol.value);
  });

  mixPbar.addEventListener("click", (e)=>{
    const r = mixPbar.getBoundingClientRect();
    const x = Math.max(0, Math.min(r.width, e.clientX - r.left));
    const pct = x / r.width;
    mixAudio.currentTime = pct * MIX_PREVIEW_SECONDS;
    updateMixProgressUI();
  });

  mixAudio.addEventListener("timeupdate", ()=>{
    updateMixProgressUI();
    if (mixAudio.currentTime >= MIX_PREVIEW_SECONDS){
      if (mixRepeat) loadMix(mixIndex, true);
      else loadMix(nextIndex(), true);
    }
  });

  mixAudio.addEventListener("play", ()=>{ setMixButtons(); renderMixList(); });
  mixAudio.addEventListener("pause", ()=>{ setMixButtons(); renderMixList(); });

  function isMixOpen(){ return mixWin.classList.contains("open"); }

  window.addEventListener("keydown", (e)=>{
    if (!isMixOpen()) return;
    const tag = (document.activeElement && document.activeElement.tagName || "").toLowerCase();
    if (tag === "input" || tag === "textarea") return;

    const k = e.key.toLowerCase();

    if (e.code === "Space"){
      e.preventDefault();
      if (mixAudio.paused) playMix(); else pauseMix();
      return;
    }
    if (e.key === "ArrowRight"){
      e.preventDefault();
      loadMix(nextIndex(), true);
      return;
    }
    if (e.key === "ArrowLeft"){
      e.preventDefault();
      loadMix(prevIndex(), true);
      return;
    }
    if (k === "s"){
      mixShuffle = !mixShuffle;
      if (mixShuffle) reshuffle();
      setMixButtons();
      return;
    }
    if (k === "r"){
      mixRepeat = !mixRepeat;
      setMixButtons();
      return;
    }
  });

  mixAudio.volume = Number(mixVol.value);
  loadMix(0, false);

  // ===== Game =====
  const canvas = document.getElementById("dinoCanvas");
  const ctx = canvas.getContext("2d");
  const scoreEl = document.getElementById("score");
  const bestEl = document.getElementById("best");
  const stateEl = document.getElementById("gameState");

  let best = 0;
  let running = false;
  let dead = false;

  const G = 0.9;
  const groundY = 210;

  const player = { x: 90, y: groundY, w: 26, h: 34, vy: 0, onGround: true };
  let obstacles = [];
  let speed = 4.2;
  let score = 0;
  let spawnTimer = 0;

  function resetGame(){
    running = false;
    dead = false;
    speed = 4.3;
    score = 0;
    spawnTimer = 0;
    obstacles = [];
    player.y = groundY;
    player.vy = 0;
    player.onGround = true;
    scoreEl.textContent = "0";
    stateEl.textContent = "Kliknij / Space aby start";
  }

  function spawnObstacle(){
    const h = 18 + Math.random()*22;
    const w = 14 + Math.random()*20;
    obstacles.push({ x: canvas.width + 30, y: groundY + (34 - h), w, h });
  }

  function jump(){
    if (dead) { startOrResumeGame(true); return; }
    if (!running){ startOrResumeGame(true); return; }
    if (player.onGround){
      player.vy = -14.5;
      player.onGround = false;
    }
  }

  function collide(a,b){
    return (a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y);
  }

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    ctx.globalAlpha = 0.9;
    ctx.beginPath();
    ctx.moveTo(0, groundY+34);
    ctx.lineTo(canvas.width, groundY+34);
    ctx.lineWidth = 2;
    ctx.strokeStyle = "rgba(0,0,0,.25)";
    ctx.stroke();
    ctx.globalAlpha = 1;

    ctx.fillStyle = "rgba(0,0,0,.85)";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    ctx.fillStyle = "rgba(0,0,0,.6)";
    obstacles.forEach(o => ctx.fillRect(o.x, o.y, o.w, o.h));

    ctx.globalAlpha = 0.08;
    for (let i=0;i<4;i++){
      const cx = (i*260 + (score*2)%260);
      ctx.beginPath();
      ctx.ellipse(cx, 70 + i*8, 42, 18, 0, 0, Math.PI*2);
      ctx.fillStyle = "rgba(0,0,0,1)";
      ctx.fill();
    }
    ctx.globalAlpha = 1;
  }

  function step(){
    if (!running){
      draw();
      requestAnimationFrame(step);
      return;
    }

    player.vy += G;
    player.y += player.vy;

    if (player.y >= groundY){
      player.y = groundY;
      player.vy = 0;
      player.onGround = true;
    }

    spawnTimer -= 1;
    if (spawnTimer <= 0){
      spawnObstacle();
      spawnTimer = 55 + Math.random()*45;
    }

    obstacles.forEach(o => o.x -= speed);
    obstacles = obstacles.filter(o => o.x + o.w > -20);

    for (const o of obstacles){
      if (collide(player, o)){
        dead = true;
        running = false;
        stateEl.textContent = "Game over ‚Äî Space/klik aby zrestartowaƒá";
        best = Math.max(best, Math.floor(score));
        bestEl.textContent = String(best);
        break;
      }
    }

    score += 0.18;
    scoreEl.textContent = String(Math.floor(score));
    speed += 0.0022;

    draw();
    requestAnimationFrame(step);
  }

  function startOrResumeGame(forceRestart=false){
    if (forceRestart || dead){
      resetGame();
      dead = false;
    }
    if (!running){
      running = true;
      stateEl.textContent = "Grasz‚Ä¶";
    }
  }

  window.addEventListener("keydown", (e)=>{
    if (!gameWin.classList.contains("open")) return;
    if (e.code === "Space" || e.code === "ArrowUp"){
      e.preventDefault();
      jump();
    }
  });

  canvas.addEventListener("pointerdown", (e)=>{ 
    if (!gameWin.classList.contains("open")) return; 
    e.preventDefault(); 
    jump(); 
  });

  resetGame();
  requestAnimationFrame(step);

  // ===== iCloud Photos =====
  const REAL_PHOTOS = ["p1.jpg","p2.jpg","p3.jpg","p4.jpg","p5.jpg","p6.jpg"];
  const icloudGrid = document.getElementById("icloudGrid");
  const icloudViewer = document.getElementById("icloudViewer");
  const icloudViewerImg = document.getElementById("icloudViewerImg");
  const icloudViewerClose = document.getElementById("icloudViewerClose");
  const icloudViewerTitle = document.getElementById("icloudViewerTitle");
  const icloudSearch = document.getElementById("icloudSearch");
  const icloudTabs = Array.from(document.querySelectorAll(".icloudTab"));

  let currentFilter = "";

  function buildIcloudGrid(){
    if (!icloudGrid) return;
    icloudGrid.innerHTML = "";

    const totalTiles = 24;
    const realPhotosFiltered = REAL_PHOTOS.filter(n =>
      n.toLowerCase().includes(currentFilter.toLowerCase())
    );

    const realCount = Math.min(realPhotosFiltered.length, 10);
    const slots = new Set();
    while (slots.size < realCount){
      slots.add(Math.floor(Math.random() * totalTiles));
    }

    let idx = 0;

    for (let i=0; i<totalTiles; i++){
      const tile = document.createElement("div");
      tile.className = "photoTile";

      if (slots.has(i) && idx < realCount){
        const src = realPhotosFiltered[idx++];
        const img = document.createElement("img");
        img.src = src;
        img.alt = "";
        tile.appendChild(img);

        tile.addEventListener("click", ()=>{
          icloudViewerImg.src = src;
          icloudViewerTitle.textContent = src;
          icloudViewer.classList.add("open");
        });
      } else {
        tile.classList.add("loading");
      }

      icloudGrid.appendChild(tile);
    }
  }

  icloudViewerClose.addEventListener("click", ()=>{
    icloudViewer.classList.remove("open");
    icloudViewerImg.src = "";
  });

  window.addEventListener("keydown", (e)=>{
    if (e.key === "Escape" && icloudViewer.classList.contains("open")){
      icloudViewerClose.click();
    }
  });

  icloudSearch?.addEventListener("input", ()=>{
    currentFilter = icloudSearch.value || "";
    buildIcloudGrid();
  });

  icloudTabs.forEach(tab=>{
    tab.addEventListener("click", ()=>{
      icloudTabs.forEach(t=> t.classList.remove("active"));
      tab.classList.add("active");
      buildIcloudGrid();
    });
  });
</script>
</body>
</html>

<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>godwifi</title>

<link rel="preload" as="image" href="freewifi.png" />
<link rel="icon" type="image/png" href="favicon.png">

<style>
  :root{
    --shadow: 0 50px 140px rgba(0,0,0,.55);
    --border: rgba(255,255,255,.22);
    --text: rgba(255,255,255,.92);
    --muted: rgba(255,255,255,.72);
    --menuBg: rgba(255,255,255,.16);
    --menuBorder: rgba(255,255,255,.18);
    --dockBg: rgba(255,255,255,.12);
    --dockBorder: rgba(255,255,255,.16);
    --glassA: rgba(255,255,255,.28);
    --glassB: rgba(255,255,255,.14);
  }

  *{ box-sizing:border-box; }
  html,body{ height:100%; }
  body{
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", Segoe UI, Roboto, Arial, sans-serif;
    overflow:hidden;
    color:var(--text);
    user-select:none;
  }

  /* ===== Desktop wallpaper ===== */
  .wallpaper{
    position:fixed; inset:-80px;
    background:
      radial-gradient(900px 520px at 18% 18%, rgba(120,122,255,.28), transparent 60%),
      radial-gradient(780px 420px at 86% 28%, rgba(255,120,200,.22), transparent 62%),
      radial-gradient(820px 520px at 52% 86%, rgba(120,255,210,.18), transparent 62%),
      radial-gradient(700px 500px at 45% 45%, rgba(255,255,255,.08), transparent 60%),
      linear-gradient(180deg,#0f1220,#050509);
    filter:saturate(125%) contrast(105%);
    transform:translateZ(0);
  }

  .grain{
    position:fixed; inset:0;
    pointer-events:none;
    opacity:.12;
    background-image:
      radial-gradient(circle at 15% 25%, rgba(255,255,255,.08), transparent 35%),
      radial-gradient(circle at 70% 65%, rgba(255,255,255,.06), transparent 40%);
    mix-blend-mode: overlay;
  }

  /* blurred brand logo in background */
  .brandBlur{
    position:fixed; inset:0;
    display:grid; place-items:center;
    pointer-events:none;
  }
  .brandBlur::before{
    content:"";
    width:min(520px,78vw);
    height:min(520px,78vw);
    background:url("freewifi.png") center/contain no-repeat;
    opacity:.16;
    filter: blur(120px) saturate(140%);
    transform: scale(1.12);
  }

  /* ===== Top menu bar ===== */
  .menubar{
    position:fixed; top:0; left:0; right:0;
    height:32px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 12px;
    background: rgba(255,255,255,.10);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    border-bottom:1px solid rgba(255,255,255,.12);
    z-index:50;
  }

  .menubar .left, .menubar .right{
    display:flex; align-items:center; gap:12px;
    font-size:13px;
    color: rgba(255,255,255,.92);
  }

  .apple{
    width:14px; height:14px;
    display:inline-block;
    border-radius:4px;
    background: rgba(255,255,255,.85);
    clip-path: polygon(55% 3%, 66% 10%, 64% 20%, 74% 25%, 82% 36%, 76% 52%, 66% 61%, 66% 76%, 57% 95%, 43% 95%, 35% 75%, 35% 60%, 24% 52%, 18% 36%, 26% 25%, 36% 20%, 34% 10%, 45% 3%);
    opacity:.9;
  }

  .menuItem{
    position:relative;
    padding:4px 8px;
    border-radius:8px;
    cursor:default;
  }
  .menuItem.active,
  .menuItem:hover{
    background: rgba(255,255,255,.12);
  }

  .dropdown{
    position:absolute;
    top:30px;
    left:0;
    min-width:190px;
    padding:8px;
    border-radius:14px;
    background: var(--menuBg);
    border:1px solid var(--menuBorder);
    box-shadow: 0 30px 90px rgba(0,0,0,.45);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    display:none;
  }
  .menuItem.active .dropdown{
    display:block;
  }
  .dropdown a, .dropdown button{
    display:flex;
    width:100%;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    padding:10px 10px;
    border-radius:12px;
    color: rgba(255,255,255,.92);
    text-decoration:none;
    font-size:13px;
    background: transparent;
    border:0;
    cursor:default;
  }
  .dropdown a:hover, .dropdown button:hover{
    background: rgba(255,255,255,.12);
  }
  .kbd{
    opacity:.7;
    font-variant-numeric: tabular-nums;
    font-size:12px;
  }

  /* ===== Battery ===== */
  .battery{
    display:flex;
    align-items:center;
    gap:8px;
    font-size:12px;
    opacity:.92;
  }
  .batteryIcon{
    width:26px;
    height:12px;
    border-radius:4px;
    border:1px solid rgba(255,255,255,.35);
    position:relative;
    overflow:hidden;
    background: rgba(255,255,255,.10);
  }
  .batteryLevel{
    position:absolute;
    left:0; top:0; bottom:0;
    width:50%;
    background: rgba(140,255,170,.95);
  }
  .batteryCap{
    position:absolute;
    right:-3px;
    top:3px;
    width:3px;
    height:6px;
    border-radius:2px;
    background: rgba(255,255,255,.35);
  }
  .batteryBolt{
    position:absolute;
    inset:0;
    display:grid;
    place-items:center;
    font-size:10px;
    opacity:0;
    transform: translateY(-.5px);
  }
  .batteryPct{
    font-variant-numeric: tabular-nums;
    opacity:.9;
  }

  /* Wi-Fi clickable */
  .wifiBtn{
    opacity:.92;
    padding:2px 6px;
    border-radius:8px;
    cursor:pointer;
  }
  .wifiBtn:hover{
    background: rgba(255,255,255,.12);
  }

  /* ===== Desktop icons ===== */
  .icons{
    position:fixed;
    top:56px;
    left:20px;
    display:grid;
    gap:16px;
    z-index:1;
    color:rgba(255,255,255,.90);
  }

  .icon{
    width: clamp(64px, 7.5vw, 92px);
    text-align:center;
    font-size: clamp(11px, 1.2vw, 13px);
    line-height:1.2;
    text-shadow: 0 2px 10px rgba(0,0,0,.35);
    cursor:pointer;
  }

  .icon .pic{
    width: clamp(44px, 5.2vw, 56px);
    aspect-ratio: 1 / 1;
    margin:0 auto 6px;
    border-radius: clamp(12px, 1.6vw, 16px);
    display:grid;
    place-items:center;
    background: rgba(255,255,255,.14);
    border:1px solid rgba(255,255,255,.18);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 12px 30px rgba(0,0,0,.28);
    transform: translateZ(0);
    transition: transform .14s ease, background .14s ease;
  }
  .icon:hover .pic{
    transform: translateZ(0) scale(1.04);
    background: rgba(255,255,255,.18);
  }

  .deskIconImg{
    width: 62%;
    height: 62%;
    object-fit: contain;
    display:block;
    pointer-events:none;
    filter: drop-shadow(0 8px 14px rgba(0,0,0,.20));
    opacity: .95;
    transform: translateZ(0);
  }

  /* ===== Stage + windows ===== */
  .stage{
    position:fixed;
    inset:0;
    padding: 72px 16px 92px;
    display:grid;
    place-items:center;
    z-index:10;
    pointer-events:none;
  }
  .stage.active{ pointer-events:auto; }

  .app{
    width:min(560px, 92vw);
    border-radius:22px;
    overflow:hidden;
    background: linear-gradient(180deg, var(--glassA), var(--glassB));
    border:1px solid var(--border);
    box-shadow: var(--shadow);
    backdrop-filter: blur(26px);
    -webkit-backdrop-filter: blur(26px);
    will-change: transform, opacity;

    opacity:0;
    pointer-events:none;
    transform: translate3d(var(--x, 0px), var(--y, 0px), 0) scale(.98);
  }
  .app.open{
    opacity:1;
    pointer-events:auto;
  }
  .app.dragging{
    transition:none !important;
    cursor:grabbing;
  }

  .titlebar{
    height:44px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 14px;
    background: rgba(255,255,255,.14);
    border-bottom:1px solid rgba(255,255,255,.14);
    cursor:grab;
  }

  .traffic{ display:flex; gap:8px; align-items:center; }
  .dot{
    width:12px; height:12px; border-radius:50%;
    border:0; padding:0;
    cursor:pointer;
  }
  .dot:active{ transform: scale(.95); }

  .red{ background:#ff5f57; }
  .yellow{ background:#ffbd2e; }
  .green{ background:#28c840; }

  .title{
    font-size:13px;
    color: rgba(255,255,255,.85);
    letter-spacing:.2px;
  }

  .content{
    padding: 34px 28px 26px;
    text-align:center;
  }

  .logoBtn{
    border:0;
    background:transparent;
    padding:0;
    cursor:pointer;
  }
  .logo{
    width:min(320px, 72vw);
    height:auto;
    display:block;
    margin:0 auto;
    filter: drop-shadow(0 18px 35px rgba(0,0,0,.35));
    transition: transform .22s ease, opacity .22s ease;
  }
  .logoBtn:hover .logo{ transform: scale(1.04); opacity:.96; }
  .hint{ margin-top:12px; font-size:13px; color: var(--muted); }

  /* Liquid bubble menu */
  .menuWrap{
    margin-top:18px;
    overflow:hidden;
    max-height:0;
    opacity:0;
    transform: translateY(-10px) scale(.97);
    transition: all .40s cubic-bezier(.2,.9,.2,1);
  }
  .menuWrap.open{
    max-height:420px;
    opacity:1;
    transform: translateY(0) scale(1);
  }
  .menu{ display:grid; gap:14px; }

  .menu a{
    text-decoration:none;
    color: rgba(255,255,255,.92);
    border-radius:999px;
    padding:14px 18px;
    font-size:15px;
    font-weight:600;
    text-align:center;

    background: rgba(255,255,255,.16);
    border:1px solid rgba(255,255,255,.20);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);

    box-shadow:
      0 14px 34px rgba(0,0,0,.32),
      inset 0 1px 0 rgba(255,255,255,.28);

    transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
  }
  .menu a:hover{
    background: rgba(255,255,255,.22);
    transform: translateY(-2px) scale(1.01);
    box-shadow:
      0 20px 50px rgba(0,0,0,.38),
      inset 0 1px 0 rgba(255,255,255,.38);
  }
  .menu a:active{ transform: scale(.985); }

  .menu a.discord{
    background: rgba(88,101,242,.92);
    border:1px solid rgba(255,255,255,.22);
    box-shadow:
      0 18px 44px rgba(88,101,242,.32),
      inset 0 1px 0 rgba(255,255,255,.26);
  }
  .menu a.discord:hover{ background: rgba(88,101,242,1); }

  /* ===== Finder windows ===== */
  .app.finder{ width:min(680px, 92vw); }
  .finderBody{ padding: 18px 18px 22px; }

  .finderGrid{
    display:grid;
    grid-template-columns: repeat(4, minmax(90px, 1fr));
    gap: 14px;
  }

  .finderItem{
    border:0;
    background: rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.14);
    border-radius:16px;
    padding:12px 10px;
    color: rgba(255,255,255,.92);
    display:grid;
    place-items:center;
    gap:8px;
    cursor:pointer;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: 0 12px 28px rgba(0,0,0,.22);
    transition: .15s ease;
  }
  .finderItem:hover{
    transform: translateY(-2px);
    background: rgba(255,255,255,.14);
  }

  .finderIcon{
    width:42px;
    height:42px;
    object-fit:contain;
    filter: drop-shadow(0 10px 16px rgba(0,0,0,.22));
  }

  .finderItem span{
    font-size:12px;
    opacity:.9;
  }

  .finderPath{
    font-size:12px;
    opacity:.75;
    padding: 12px 18px 0;
  }

  .fileBadge{
    font-size:11px;
    opacity:.7;
    margin-top:-4px;
  }

  @media (max-width:520px){
    .finderGrid{ grid-template-columns: repeat(3, minmax(90px, 1fr)); }
  }

  /* ===== Game window ===== */
  .app.game{
    width: min(760px, 96vw);
  }
  .gameWrap{
    padding: 14px 18px 18px;
    text-align:left;
  }
  .gameTop{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:10px;
    font-size:13px;
    opacity:.9;
  }
  canvas#dinoCanvas{
    width:100%;
    height:220px;
    display:block;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.16);
    background: rgba(255,255,255,.08);
    box-shadow: 0 18px 44px rgba(0,0,0,.30);
    backdrop-filter: blur(10px);
  }
  .gameHint{
    margin-top:10px;
    font-size:12px;
    opacity:.75;
  }

  /* ===== Dock ===== */
  .dock{
    position:fixed;
    left:50%;
    bottom:14px;
    transform:translateX(-50%);
    display:flex;
    gap: var(--dockGap, 10px);
    padding:10px 12px;
    border-radius:22px;
    background: var(--dockBg);
    border:1px solid var(--dockBorder);
    backdrop-filter: blur(22px);
    -webkit-backdrop-filter: blur(22px);
    box-shadow: 0 30px 90px rgba(0,0,0,.45);
    z-index:60;
    align-items:flex-end;
  }

  .appicon{
    width:46px; height:46px;
    border-radius:14px;
    background: rgba(255,255,255,.16);
    border:1px solid rgba(255,255,255,.18);
    display:grid;
    place-items:center;
    position:relative;
    transform: translateY(var(--lift, 0px)) scale(var(--scale, 1));
    transform-origin: 50% 100%;
    transition: background .12s ease;
    cursor:pointer;
    will-change: transform;
    margin-left: var(--ml, 0px);
    margin-right: var(--mr, 0px);
  }
  .appicon:hover{ background: rgba(255,255,255,.22); }

  .appicon .runDot{
    position:absolute;
    bottom:-7px;
    width:6px; height:6px;
    border-radius:50%;
    background: rgba(255,255,255,.75);
    opacity:.55;
  }

  .dockimg{
    width:28px;
    height:28px;
    object-fit:contain;
    display:block;
    pointer-events:none;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.20));
  }

  /* macOS-like IG popup */
  .dockPopup{
    position:absolute;
    left:50%;
    bottom:62px;
    transform:translateX(-50%) translateY(8px) scale(.98);
    width: 240px;

    padding:10px;
    border-radius:16px;
    background: rgba(255,255,255,.18);
    border: 1px solid rgba(255,255,255,.20);
    box-shadow: 0 26px 90px rgba(0,0,0,.48);

    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);

    opacity:0;
    pointer-events:none;
    transition: .18s ease;
    z-index:200;
  }
  .appicon.showPopup .dockPopup{
    opacity:1;
    pointer-events:auto;
    transform:translateX(-50%) translateY(0) scale(1);
  }

  .dockPopupHeader{
    font-size:12px;
    color: rgba(255,255,255,.78);
    padding: 4px 8px 8px;
    letter-spacing:.2px;
  }
  .dockSep{
    height:1px;
    background: rgba(255,255,255,.16);
    margin: 6px 6px;
    border-radius:999px;
  }

  .dockItem{
    width:100%;
    border:0;
    background: transparent;
    color: rgba(255,255,255,.92);
    padding:10px 10px;
    border-radius:12px;
    font-size:13px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    cursor:pointer;
    transition:.14s ease;
  }
  .dockItem:hover{
    background: rgba(255,255,255,.14);
    transform: translateY(-1px);
  }
  .dockItemLeft{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .dockTiny{
    width:16px; height:16px;
    object-fit:contain;
    border-radius:4px;
    opacity:.95;
    pointer-events:none;
  }
  .dockItemHint{
    font-size:12px;
    opacity:.65;
  }

  @media (max-width:420px){
    .dock{ gap:8px; padding:8px 10px; }
    .appicon{ width:42px; height:42px; border-radius:13px; }
    .dockPopup{ width: 220px; }
  }
</style>
</head>

<body>
  <div class="wallpaper" aria-hidden="true"></div>
  <div class="brandBlur" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- Top menu bar -->
  <div class="menubar" role="banner" aria-label="macOS menu bar">
    <div class="left">
      <span class="apple" aria-hidden="true"></span>
      <strong style="font-weight:600">Finder</strong>

      <div class="menuItem" data-menu="file">Plik
        <div class="dropdown" role="menu" aria-label="Plik">
          <button type="button" id="reloadBtn">Odśwież <span class="kbd">⌘R</span></button>
          <button type="button" id="closeMenusBtn">Zamknij menu <span class="kbd">Esc</span></button>
        </div>
      </div>

      <div class="menuItem" data-menu="view">Widok
        <div class="dropdown" role="menu" aria-label="Widok">
          <button type="button" id="toggleMenuBtn">Pokaż/ukryj menu <span class="kbd">⌘E</span></button>
        </div>
      </div>

      <div class="menuItem" data-menu="help">Pomoc
        <div class="dropdown" role="menu" aria-label="Pomoc">
          <a href="https://instagram.com/god.wifi" target="_blank" rel="noopener">Instagram god wifi</a>
          <a href="https://instagram.com/tokarz_k" target="_blank" rel="noopener">Instagram Gumisia</a>
        </div>
      </div>
    </div>

    <div class="right">
      <span id="wifiBtn" class="wifiBtn" title="Kliknij: gra">Wi-Fi</span>

      <div class="battery" id="battery" aria-label="Bateria">
        <div class="batteryIcon" aria-hidden="true">
          <div class="batteryLevel" id="batteryLevel"></div>
          <div class="batteryCap"></div>
          <div class="batteryBolt" id="batteryBolt">⚡</div>
        </div>
        <div class="batteryPct" id="batteryPct">--%</div>
      </div>

      <span id="clock" style="opacity:.92; font-variant-numeric: tabular-nums;"></span>
    </div>
  </div>

  <!-- Desktop icons -->
  <div class="icons" aria-label="Pulpit">
    <div class="icon" id="driveLauncher">
      <div class="pic"><img src="drive.png" alt="" class="deskIconImg"></div>
      <div>Dysk</div>
    </div>

    <div class="icon" id="folderLauncher" aria-label="Otwórz Folder">
      <div class="pic"><img src="files.png" alt="" class="deskIconImg"></div>
      <div>Folder</div>
    </div>

    <div class="icon" id="appLauncher" aria-label="Otwórz godwifi">
      <div class="pic"><img src="freewifi.png" alt="" class="deskIconImg"></div>
      <div>godwifi</div>
    </div>
  </div>

  <!-- Stage -->
  <div class="stage" id="stage">

    <!-- Main app window -->
    <section class="app" id="app" aria-label="Okno aplikacji">
      <div class="titlebar" data-drag="app">
        <div class="traffic" aria-label="Sterowanie oknem">
          <button class="dot red" id="appClose" type="button" aria-label="Zamknij"></button>
          <button class="dot yellow" id="appMin" type="button" aria-label="Minimalizuj"></button>
          <button class="dot green" id="appMax" type="button" aria-label="Powiększ"></button>
        </div>
        <div class="title">godwifi</div>
        <div style="width:52px;"></div>
      </div>

      <div class="content">
        <button class="logoBtn" id="toggle" aria-expanded="false" aria-controls="menuWrap">
          <img class="logo" id="logo" src="freewifi.png" alt="godwifi logo">
        </button>
        <div class="hint" id="hint">Kliknij logo, aby rozwinąć</div>

        <div class="menuWrap" id="menuWrap">
          <nav class="menu" aria-label="Linki">
            <a href="https://instagram.com/tokarz_k" target="_blank" rel="noopener">Sprawdź Instagram Gumisia</a>
            <a href="https://instagram.com/god.wifi" target="_blank" rel="noopener">Sprawdź Instagram god wifi</a>
            <a id="spotifyLink" href="#" target="_blank" rel="noopener">Sprawdź Spotify</a>
            <a id="discordLink" class="discord" href="#" target="_blank" rel="noopener">Wejdź na Discord</a>
          </nav>
        </div>
      </div>
    </section>

    <!-- Finder root -->
    <section class="app finder" id="finderWin" aria-label="Okno folderu">
      <div class="titlebar" data-drag="finderWin">
        <div class="traffic" aria-label="Sterowanie oknem">
          <button class="dot red" id="finderClose" type="button" aria-label="Zamknij"></button>
          <button class="dot yellow" id="finderMin" type="button" aria-label="Minimalizuj"></button>
          <button class="dot green" id="finderMax" type="button" aria-label="Powiększ"></button>
        </div>
        <div class="title">Folder</div>
        <div style="width:52px;"></div>
      </div>

      <div class="finderPath">~/</div>
      <div class="finderBody">
        <div class="finderGrid" aria-label="Zawartość folderu">
          <button class="finderItem" type="button" id="openKoncert">
            <img src="files.png" alt="" class="finderIcon">
            <span>koncert</span>
          </button>

          <button class="finderItem" type="button">
            <img src="files.png" alt="" class="finderIcon">
            <span>projekty</span>
          </button>

          <button class="finderItem" type="button">
            <img src="files.png" alt="" class="finderIcon">
            <span>grafika</span>
          </button>

          <button class="finderItem" type="button">
            <img src="files.png" alt="" class="finderIcon">
            <span>mix</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Finder: koncert -->
    <section class="app finder" id="koncertWin" aria-label="Okno koncert">
      <div class="titlebar" data-drag="koncertWin">
        <div class="traffic" aria-label="Sterowanie oknem">
          <button class="dot red" id="koncertClose" type="button" aria-label="Zamknij"></button>
          <button class="dot yellow" id="koncertMin" type="button" aria-label="Minimalizuj"></button>
          <button class="dot green" id="koncertMax" type="button" aria-label="Powiększ"></button>
        </div>
        <div class="title">koncert</div>
        <div style="width:52px;"></div>
      </div>

      <div class="finderPath">~/koncert</div>
      <div class="finderBody">
        <div class="finderGrid" aria-label="Zawartość koncert">
          <button class="finderItem" type="button">
            <img src="files.png" alt="" class="finderIcon">
            <span>zdjęcia</span>
          </button>

          <button class="finderItem" type="button">
            <img src="files.png" alt="" class="finderIcon">
            <span>wideo</span>
          </button>

          <button class="finderItem" type="button">
            <img src="drive.png" alt="" class="finderIcon">
            <span>setlista</span>
            <div class="fileBadge">plik</div>
          </button>

          <button class="finderItem" type="button">
            <img src="drive.png" alt="" class="finderIcon">
            <span>info</span>
            <div class="fileBadge">plik</div>
          </button>
        </div>
      </div>
    </section>

    <!-- Game window -->
    <section class="app game" id="gameWin" aria-label="Gra">
      <div class="titlebar" data-drag="gameWin">
        <div class="traffic" aria-label="Sterowanie oknem">
          <button class="dot red" id="gameClose" type="button" aria-label="Zamknij"></button>
          <button class="dot yellow" id="gameMin" type="button" aria-label="Minimalizuj"></button>
          <button class="dot green" id="gameMax" type="button" aria-label="Powiększ"></button>
        </div>
        <div class="title">Wi-Fi Runner</div>
        <div style="width:52px;"></div>
      </div>

      <div class="gameWrap">
        <div class="gameTop">
          <div>Score: <span id="score">0</span> · Best: <span id="best">0</span></div>
          <div id="gameState" style="opacity:.8">Kliknij / Space aby start</div>
        </div>

        <canvas id="dinoCanvas" width="900" height="260"></canvas>
        <div class="gameHint">Sterowanie: <b>Space</b> / <b>↑</b> / klik / tap — skok. Jeśli przegrasz: Space żeby zrestartować.</div>
      </div>
    </section>

  </div>

  <!-- Dock -->
  <div class="dock" id="dock" aria-label="Dock">
    <!-- Instagram (popup) -->
    <div class="appicon" id="dockIg" title="Instagram">
      <img src="Instagram_icon.png" class="dockimg" alt="">
      <div class="runDot"></div>

      <div class="dockPopup" id="igPopup" role="menu" aria-label="Instagram menu">
        <div class="dockPopupHeader">Instagram</div>
        <div class="dockSep"></div>

        <button class="dockItem" type="button" data-ig="gumis">
          <span class="dockItemLeft">
            <img src="Instagram_icon.png" class="dockTiny" alt="">
            <span>Gumis</span>
          </span>
          <span class="dockItemHint">tokarz_k</span>
        </button>

        <button class="dockItem" type="button" data-ig="godwifi">
          <span class="dockItemLeft">
            <img src="Instagram_icon.png" class="dockTiny" alt="">
            <span>god wifi</span>
          </span>
          <span class="dockItemHint">god.wifi</span>
        </button>
      </div>
    </div>

    <!-- Spotify -->
    <div class="appicon" id="dockSpotify" title="Spotify">
      <img src="Spotify_App_Logo.svg.png" class="dockimg" alt="">
      <div class="runDot"></div>
    </div>

    <!-- Discord -->
    <div class="appicon" id="dockDiscord" title="Discord">
      <img src="discord-logo-icon-editorial-free-vector.png" class="dockimg" alt="">
      <div class="runDot"></div>
    </div>
  </div>

<script>
  // ======= LINKI =======
  const IG_GUMIS = "https://instagram.com/tokarz_k";
  const IG_GODWIFI = "https://instagram.com/god.wifi";
  const SPOTIFY_URL = "https://open.spotify.com/artist/6iz52ADwFl483ghAI7NuS1?si=V1A-TzIoRNqL1iQ_ptCGng";
  const DISCORD_URL = "https://discord.gg/4PTQRsUq9t";

  document.getElementById("spotifyLink").href = SPOTIFY_URL;
  document.getElementById("discordLink").href = DISCORD_URL;

  const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

  // ======= Clock =======
  const clock = document.getElementById("clock");
  function tick(){
    const d = new Date();
    const hh = String(d.getHours()).padStart(2,"0");
    const mm = String(d.getMinutes()).padStart(2,"0");
    clock.textContent = `${hh}:${mm}`;
  }
  tick();
  setInterval(tick, 1000 * 10);

  // ======= Battery by hour =======
  const batteryLevelEl = document.getElementById("batteryLevel");
  const batteryPctEl = document.getElementById("batteryPct");
  const batteryBoltEl = document.getElementById("batteryBolt");

  function batteryModelByHour(h){
    // 08:00 -> 100%
    // 16:00 -> ~50%
    // 22:00 -> ~12%
    // po 22:00 -> ładowanie ⚡
    let pct = 100;
    let charging = false;

    if (h >= 22 || h < 6){
      charging = true;
      const t = (h >= 22) ? (h - 22) : (h + 2); // 22..23 => 0..1, 0..5 => 2..7
      pct = Math.min(95, 20 + t * 10);
    } else if (h >= 16){
      const t = (h - 16) / 6; // 0..1
      pct = Math.round(50 - t * 38);
    } else if (h >= 8){
      const t = (h - 8) / 8;
      pct = Math.round(100 - t * 50);
    } else {
      const t = (h - 6) / 2;
      pct = Math.round(80 + t * 20);
    }

    pct = Math.max(1, Math.min(100, pct));
    return { pct, charging };
  }

  function renderBattery(){
    const h = new Date().getHours();
    const { pct, charging } = batteryModelByHour(h);

    batteryLevelEl.style.width = pct + "%";
    batteryPctEl.textContent = pct + "%";
    batteryBoltEl.style.opacity = charging ? "1" : "0";

    if (pct < 15) batteryLevelEl.style.background = "rgba(255,95,87,.95)";
    else if (pct < 35) batteryLevelEl.style.background = "rgba(255,189,46,.95)";
    else batteryLevelEl.style.background = "rgba(140,255,170,.95)";
  }
  renderBattery();
  setInterval(renderBattery, 1000 * 30);

  // ======= Menu dropdowns =======
  const menuItems = Array.from(document.querySelectorAll(".menuItem"));
  function closeAllMenus(){ menuItems.forEach(i => i.classList.remove("active")); }

  menuItems.forEach(item => {
    item.addEventListener("click", (e) => {
      e.stopPropagation();
      const isActive = item.classList.contains("active");
      closeAllMenus();
      item.classList.toggle("active", !isActive);
    });
  });

  document.getElementById("reloadBtn").addEventListener("click", () => location.reload());
  document.getElementById("closeMenusBtn").addEventListener("click", () => closeAllMenus());

  // ======= Main app internal menu =======
  const toggle = document.getElementById("toggle");
  const menuWrap = document.getElementById("menuWrap");
  const hint = document.getElementById("hint");

  function setOpen(open){
    menuWrap.classList.toggle("open", open);
    toggle.setAttribute("aria-expanded", String(open));
    hint.textContent = open ? "Wybierz link" : "Kliknij logo, aby rozwinąć";
  }
  toggle.addEventListener("click", (e) => {
    e.stopPropagation();
    setOpen(!menuWrap.classList.contains("open"));
  });

  document.getElementById("toggleMenuBtn").addEventListener("click", () => {
    setOpen(!menuWrap.classList.contains("open"));
    closeAllMenus();
  });

  // ======= Dock + IG popup =======
  const dockIg = document.getElementById("dockIg");
  const igPopup = document.getElementById("igPopup");
  const dockSpotify = document.getElementById("dockSpotify");
  const dockDiscord = document.getElementById("dockDiscord");

  function closeIgPopup(){ dockIg.classList.remove("showPopup"); }

  dockSpotify.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAllMenus(); closeIgPopup(); setOpen(false);
    window.open(SPOTIFY_URL, "_blank", "noopener");
  });

  dockDiscord.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAllMenus(); closeIgPopup(); setOpen(false);
    window.open(DISCORD_URL, "_blank", "noopener");
  });

  dockIg.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAllMenus();
    const open = !dockIg.classList.contains("showPopup");
    closeIgPopup();
    dockIg.classList.toggle("showPopup", open);
  });

  igPopup.querySelectorAll(".dockItem").forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      const which = btn.getAttribute("data-ig");
      const url = (which === "gumis") ? IG_GUMIS : IG_GODWIFI;
      closeIgPopup();
      window.open(url, "_blank", "noopener");
    });
  });

  // ======= Window system: open/minimize like macOS =======
  const stage = document.getElementById("stage");

  function rectCenter(r){ return { x: r.left + r.width/2, y: r.top + r.height/2 }; }

  function ensureStageActive(){
    const anyOpen = Array.from(document.querySelectorAll(".app")).some(w => w.classList.contains("open"));
    stage.classList.toggle("active", anyOpen);
  }

  function bringToFront(win){
    // proste: ustaw z-index wyżej niż reszta
    const base = 30;
    const z = base + Math.floor(Math.random() * 1000);
    win.style.zIndex = String(z);
  }

 function openWindow(win, fromEl){
  if (win.classList.contains("open")) {
    bringToFront(win);
    ensureStageActive();
    return;
  }

  bringToFront(win);

  // WAŻNE: zanim pokażemy okno, ustawiamy je na środek (reset offsetów)
  centerWindow(win);

  win.classList.add("open");
  ensureStageActive();

  if (prefersReduced) return;

  // animacja "z ikonki"
  win.style.visibility = "hidden";
  win.style.opacity = "1";
  win.style.transform = "translate3d(0,0,0) scale(1)";

  requestAnimationFrame(() => {
    const fromRect = fromEl.getBoundingClientRect();
    const toRect = win.getBoundingClientRect();
    win.style.visibility = "visible";

    win.animate([
      {
        transform: `translate(${(fromRect.left+fromRect.width/2)-(toRect.left+toRect.width/2)}px,
                              ${(fromRect.top+fromRect.height/2)-(toRect.top+toRect.height/2)}px)
                    scale(${Math.min(fromRect.width/toRect.width, fromRect.height/toRect.height)})`,
        opacity: 0.0
      },
      { transform: "translate(0px, 0px) scale(1)", opacity: 1.0 }
    ], {
      duration: 360,
      easing: "cubic-bezier(.2,.9,.2,1)",
      fill: "both"
    }).onfinish = () => {
      // po animacji ZAWSZE reset do środka (to naprawia Twoją sytuację)
      centerWindow(win);
    };
  });
}


  function minimizeWindow(win, toEl){
    if (!win.classList.contains("open")) return;

    if (prefersReduced){
      win.classList.remove("open");
      ensureStageActive();
      return;
    }

    const fromRect = win.getBoundingClientRect();
    const toRect = toEl.getBoundingClientRect();

    const fromC = rectCenter(fromRect);
    const toC = rectCenter(toRect);

    const dx = toC.x - fromC.x;
    const dy = toC.y - fromC.y;

    const s = Math.min(
      Math.max(0.15, toRect.width / fromRect.width),
      Math.max(0.15, toRect.height / fromRect.height)
    );

    const anim = win.animate([
      { transform: "translate(0px, 0px) scale(1)", opacity: 1.0 },
      { transform: `translate(${dx}px, ${dy}px) scale(${s})`, opacity: 0.0 }
    ], {
      duration: 320,
      easing: "cubic-bezier(.2,.9,.2,1)",
      fill: "both"
    });

    anim.onfinish = () => {
      win.classList.remove("open");
      ensureStageActive();
    };
  }

  // ======= App window controls =======
  const app = document.getElementById("app");
  const appLauncher = document.getElementById("appLauncher");
  const appMin = document.getElementById("appMin");
  const appClose = document.getElementById("appClose");
  const appMax = document.getElementById("appMax");
  let appMaxed = false;

  appLauncher.addEventListener("click", (e)=>{ e.stopPropagation(); closeAllMenus(); closeIgPopup(); openWindow(app, appLauncher); });
  appMin.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(app, appLauncher); setOpen(false); });
  appClose.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(app, appLauncher); setOpen(false); });
  appMax.addEventListener("click", (e)=>{ e.stopPropagation(); if(!app.classList.contains("open")) return; appMaxed=!appMaxed; app.style.width = appMaxed ? "min(860px, 96vw)" : "min(560px, 92vw)"; });

  // ======= Finder root controls =======
  const folderLauncher = document.getElementById("folderLauncher");
  const finderWin = document.getElementById("finderWin");
  const finderMin = document.getElementById("finderMin");
  const finderClose = document.getElementById("finderClose");
  const finderMax = document.getElementById("finderMax");
  let finderMaxed = false;

  folderLauncher.addEventListener("click", (e)=>{ e.stopPropagation(); closeAllMenus(); closeIgPopup(); openWindow(finderWin, folderLauncher); });
  finderMin.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(finderWin, folderLauncher); });
  finderClose.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(finderWin, folderLauncher); });
  finderMax.addEventListener("click", (e)=>{ e.stopPropagation(); if(!finderWin.classList.contains("open")) return; finderMaxed=!finderMaxed; finderWin.style.width = finderMaxed ? "min(980px, 96vw)" : "min(680px, 92vw)"; });

  // ======= Finder: koncert window =======
  const openKoncert = document.getElementById("openKoncert");
  const koncertWin = document.getElementById("koncertWin");
  const koncertMin = document.getElementById("koncertMin");
  const koncertClose = document.getElementById("koncertClose");
  const koncertMax = document.getElementById("koncertMax");
  let koncertMaxed = false;

  openKoncert.addEventListener("click", (e)=>{
    e.stopPropagation();
    openWindow(koncertWin, openKoncert); // animuje „z tej ikonki w Finderze”
  });
  koncertMin.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(koncertWin, openKoncert); });
  koncertClose.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(koncertWin, openKoncert); });
  koncertMax.addEventListener("click", (e)=>{ e.stopPropagation(); if(!koncertWin.classList.contains("open")) return; koncertMaxed=!koncertMaxed; koncertWin.style.width = koncertMaxed ? "min(980px, 96vw)" : "min(680px, 92vw)"; });

  // ======= Wi-Fi click -> Game =======
  const wifiBtn = document.getElementById("wifiBtn");
  const gameWin = document.getElementById("gameWin");
  const gameMin = document.getElementById("gameMin");
  const gameClose = document.getElementById("gameClose");
  const gameMax = document.getElementById("gameMax");
  let gameMaxed = false;

  wifiBtn.addEventListener("click", (e)=>{
    e.stopPropagation();
    closeAllMenus(); closeIgPopup(); setOpen(false);
    openWindow(gameWin, wifiBtn);
    startOrResumeGame();
  });

  gameMin.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(gameWin, wifiBtn); });
  gameClose.addEventListener("click", (e)=>{ e.stopPropagation(); minimizeWindow(gameWin, wifiBtn); });
  gameMax.addEventListener("click", (e)=>{ e.stopPropagation(); if(!gameWin.classList.contains("open")) return; gameMaxed=!gameMaxed; gameWin.style.width = gameMaxed ? "min(980px, 98vw)" : "min(760px, 96vw)"; });

  // ======= Dragging for ANY window =======
  function makeDraggable(titlebarEl){
    const id = titlebarEl.getAttribute("data-drag");
    const win = document.getElementById(id);
    let dragging = false;
    let startX = 0, startY = 0;
    let baseX = 0, baseY = 0;

    function getVarPx(name){
      const v = getComputedStyle(win).getPropertyValue(name).trim();
      return v ? parseFloat(v.replace("px","")) : 0;
    }
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    titlebarEl.addEventListener("pointerdown", (e)=>{
      if (!win.classList.contains("open")) return;
      if (e.target && e.target.classList && e.target.classList.contains("dot")) return;

      dragging = true;
      bringToFront(win);
      titlebarEl.setPointerCapture(e.pointerId);
      win.classList.add("dragging");

      startX = e.clientX;
      startY = e.clientY;
      baseX = getVarPx("--x");
      baseY = getVarPx("--y");
    });

    titlebarEl.addEventListener("pointermove", (e)=>{
      if (!dragging) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;

      const maxX = (window.innerWidth / 2) - 60;
      const maxY = (window.innerHeight / 2) - 80;

      const nx = clamp(baseX + dx, -maxX, maxX);
      const ny = clamp(baseY + dy, -maxY, maxY);

      win.style.setProperty("--x", nx + "px");
      win.style.setProperty("--y", ny + "px");
    });

    function stop(){
      dragging = false;
      win.classList.remove("dragging");
    }
    titlebarEl.addEventListener("pointerup", stop);
    titlebarEl.addEventListener("pointercancel", stop);

    // focus on click
    win.addEventListener("pointerdown", ()=> bringToFront(win));
  }

  document.querySelectorAll(".titlebar[data-drag]").forEach(makeDraggable);

  // ======= Click outside closes popups/menus =======
  document.addEventListener("click", (e)=>{
    if (!dockIg.contains(e.target)) closeIgPopup();
    closeAllMenus();

    // klik poza oknami zamyka tylko listę w app
    if (app.classList.contains("open") && !app.contains(e.target)) setOpen(false);
  });

  document.addEventListener("keydown", (e)=>{
    if (e.key === "Escape"){
      closeIgPopup();
      closeAllMenus();
      setOpen(false);
    }
  });

  // ======= Dock magnification (bez nachodzenia) =======
  const dock = document.getElementById("dock");
  const dockIcons = Array.from(dock.querySelectorAll(".appicon"));

  function setDockScales(clientX){
    const rect = dock.getBoundingClientRect();
    const x = clientX - rect.left;

    dockIcons.forEach(icon => {
      icon.style.setProperty("--ml", "0px");
      icon.style.setProperty("--mr", "0px");
    });

    let maxT = 0;

    dockIcons.forEach(icon => {
      const ir = icon.getBoundingClientRect();
      const center = (ir.left + ir.width/2) - rect.left;
      const dist = Math.abs(center - x);

      const maxDist = 160;
      const t = Math.max(0, 1 - (dist / maxDist));
      maxT = Math.max(maxT, t);

      const scale = 1 + (t*t) * 0.75;
      const lift  = - (t*t) * 12;

      icon.style.setProperty("--scale", scale.toFixed(3));
      icon.style.setProperty("--lift", lift.toFixed(2) + "px");

      const push = (t*t) * 14;
      icon.style.setProperty("--ml", push.toFixed(2) + "px");
      icon.style.setProperty("--mr", push.toFixed(2) + "px");
    });

    const extraGap = 10 + maxT * 10;
    dock.style.setProperty("--dockGap", extraGap.toFixed(2) + "px");
  }

  dock.addEventListener("mousemove", (e) => setDockScales(e.clientX));
  dock.addEventListener("mouseleave", () => {
    dock.style.setProperty("--dockGap", "10px");
    dockIcons.forEach(icon => {
      icon.style.setProperty("--scale", "1");
      icon.style.setProperty("--lift", "0px");
      icon.style.setProperty("--ml", "0px");
      icon.style.setProperty("--mr", "0px");
    });
  });

  // ======= Dino-like runner game (custom) =======
  const canvas = document.getElementById("dinoCanvas");
  const ctx = canvas.getContext("2d");
  const scoreEl = document.getElementById("score");
  const bestEl = document.getElementById("best");
  const stateEl = document.getElementById("gameState");

  let best = 0;
  let running = false;
  let dead = false;

  const G = 0.9;
  const groundY = 210;

  const player = {
    x: 90, y: groundY, w: 26, h: 34,
    vy: 0,
    onGround: true
  };

  let obstacles = [];
  let speed = 6.2;
  let score = 0;
  let spawnTimer = 0;

  function resetGame(){
    running = false;
    dead = false;
    speed = 6.2;
    score = 0;
    spawnTimer = 0;
    obstacles = [];
    player.y = groundY;
    player.vy = 0;
    player.onGround = true;
    scoreEl.textContent = "0";
    stateEl.textContent = "Kliknij / Space aby start";
  }

  function spawnObstacle(){
    const h = 18 + Math.random()*22;
    const w = 14 + Math.random()*20;
    obstacles.push({
      x: canvas.width + 30,
      y: groundY + (34 - h),
      w, h
    });
  }

  function jump(){
    if (dead) { startOrResumeGame(true); return; }
    if (!running){ startOrResumeGame(true); return; }
    if (player.onGround){
      player.vy = -14.5;
      player.onGround = false;
    }
  }

  function collide(a,b){
    return (a.x < b.x + b.w &&
            a.x + a.w > b.x &&
            a.y < b.y + b.h &&
            a.y + a.h > b.y);
  }

  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // horizon / glass
    ctx.globalAlpha = 0.9;
    ctx.beginPath();
    ctx.moveTo(0, groundY+34);
    ctx.lineTo(canvas.width, groundY+34);
    ctx.lineWidth = 2;
    ctx.strokeStyle = "rgba(255,255,255,.35)";
    ctx.stroke();
    ctx.globalAlpha = 1;

    // player (simple)
    ctx.fillStyle = "rgba(255,255,255,.92)";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // obstacles
    ctx.fillStyle = "rgba(255,255,255,.65)";
    obstacles.forEach(o => ctx.fillRect(o.x, o.y, o.w, o.h));

    // small clouds
    ctx.globalAlpha = 0.12;
    for (let i=0;i<4;i++){
      const cx = (i*260 + (score*2)%260);
      ctx.beginPath();
      ctx.ellipse(cx, 70 + i*8, 42, 18, 0, 0, Math.PI*2);
      ctx.fillStyle = "rgba(255,255,255,1)";
      ctx.fill();
    }
    ctx.globalAlpha = 1;
  }

  function step(){
    if (!running){
      draw();
      requestAnimationFrame(step);
      return;
    }

    // physics
    player.vy += G;
    player.y += player.vy;

    if (player.y >= groundY){
      player.y = groundY;
      player.vy = 0;
      player.onGround = true;
    }

    // spawn
    spawnTimer -= 1;
    if (spawnTimer <= 0){
      spawnObstacle();
      spawnTimer = 55 + Math.random()*45;
    }

    // move obstacles
    obstacles.forEach(o => o.x -= speed);
    obstacles = obstacles.filter(o => o.x + o.w > -20);

    // collisions
    for (const o of obstacles){
      if (collide(player, o)){
        dead = true;
        running = false;
        stateEl.textContent = "Game over — Space/klik aby zrestartować";
        best = Math.max(best, Math.floor(score));
        bestEl.textContent = String(best);
        break;
      }
    }

    // scoring
    score += 0.18;
    scoreEl.textContent = String(Math.floor(score));
    speed += 0.0022;

    draw();
    requestAnimationFrame(step);
  }

  function startOrResumeGame(forceRestart=false){
    if (forceRestart || dead){
      resetGame();
      dead = false;
    }
    if (!running){
      running = true;
      stateEl.textContent = "Grasz…";
    }
  }

  // controls
  window.addEventListener("keydown", (e)=>{
    if (e.code === "Space" || e.code === "ArrowUp"){
      e.preventDefault();
      jump();
    }
  });
  canvas.addEventListener("pointerdown", (e)=>{ e.preventDefault(); jump(); });

  resetGame();
  requestAnimationFrame(step);

  // start: everything closed
  ensureStageActive();
</script>

</body>
</html>

<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>godwifi</title>

<link rel="preload" as="image" href="freewifi.png" />
<link rel="icon" type="image/png" href="favicon.png">

<style>
  :root{
    --shadow: 0 50px 140px rgba(0,0,0,.55);
    --border: rgba(255,255,255,.22);
    --text: rgba(255,255,255,.92);
    --muted: rgba(255,255,255,.72);
    --menuBg: rgba(255,255,255,.16);
    --menuBorder: rgba(255,255,255,.18);
    --dockBg: rgba(255,255,255,.12);
    --dockBorder: rgba(255,255,255,.16);
    --glassA: rgba(255,255,255,.28);
    --glassB: rgba(255,255,255,.14);
  }

  *{ box-sizing:border-box; }
  html,body{ height:100%; }
  body{
    margin:0;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", Segoe UI, Roboto, Arial, sans-serif;
    overflow:hidden;
    color:var(--text);
    user-select:none;
  }

  /* ===== Desktop wallpaper ===== */
  .wallpaper{
    position:fixed; inset:-80px;
    background:
      radial-gradient(900px 520px at 18% 18%, rgba(120,122,255,.28), transparent 60%),
      radial-gradient(780px 420px at 86% 28%, rgba(255,120,200,.22), transparent 62%),
      radial-gradient(820px 520px at 52% 86%, rgba(120,255,210,.18), transparent 62%),
      radial-gradient(700px 500px at 45% 45%, rgba(255,255,255,.08), transparent 60%),
      linear-gradient(180deg,#0f1220,#050509);
    filter:saturate(125%) contrast(105%);
    transform:translateZ(0);
  }

  .grain{
    position:fixed; inset:0;
    pointer-events:none;
    opacity:.12;
    background-image:
      radial-gradient(circle at 15% 25%, rgba(255,255,255,.08), transparent 35%),
      radial-gradient(circle at 70% 65%, rgba(255,255,255,.06), transparent 40%);
    mix-blend-mode: overlay;
  }

  /* blurred brand logo in background */
  .brandBlur{
    position:fixed; inset:0;
    display:grid; place-items:center;
    pointer-events:none;
  }
  .brandBlur::before{
    content:"";
    width:min(520px,78vw);
    height:min(520px,78vw);
    background:url("freewifi.png") center/contain no-repeat;
    opacity:.20;
    filter: blur(120px) saturate(140%);
    transform: scale(1.12);
  }

  /* ===== Top menu bar ===== */
  .menubar{
    position:fixed; top:0; left:0; right:0;
    height:32px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 12px;
    background: rgba(255,255,255,.10);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    border-bottom:1px solid rgba(255,255,255,.12);
    z-index:50;
  }

  .menubar .left, .menubar .right{
    display:flex; align-items:center; gap:12px;
    font-size:13px;
    color: rgba(255,255,255,.92);
  }

  .apple{
    width:14px; height:14px;
    display:inline-block;
    border-radius:4px;
    background: rgba(255,255,255,.85);
    clip-path: polygon(55% 3%, 66% 10%, 64% 20%, 74% 25%, 82% 36%, 76% 52%, 66% 61%, 66% 76%, 57% 95%, 43% 95%, 35% 75%, 35% 60%, 24% 52%, 18% 36%, 26% 25%, 36% 20%, 34% 10%, 45% 3%);
    opacity:.9;
  }

  /* Dropdown menu items */
  .menuItem{
    position:relative;
    padding:4px 8px;
    border-radius:8px;
    cursor:default;
  }
  .menuItem.active,
  .menuItem:hover{
    background: rgba(255,255,255,.12);
  }

  .dropdown{
    position:absolute;
    top:30px;
    left:0;
    min-width:190px;
    padding:8px;
    border-radius:14px;
    background: var(--menuBg);
    border:1px solid var(--menuBorder);
    box-shadow: 0 30px 90px rgba(0,0,0,.45);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    display:none;
  }
  .menuItem.active .dropdown{
    display:block;
  }
  .dropdown a, .dropdown button{
    display:flex;
    width:100%;
    gap:10px;
    align-items:center;
    justify-content:space-between;
    padding:10px 10px;
    border-radius:12px;
    color: rgba(255,255,255,.92);
    text-decoration:none;
    font-size:13px;
    background: transparent;
    border:0;
    cursor:default;
  }
  .dropdown a:hover, .dropdown button:hover{
    background: rgba(255,255,255,.12);
  }
  .kbd{
    opacity:.7;
    font-variant-numeric: tabular-nums;
    font-size:12px;
  }

  /* ===== Desktop icons ===== */
  .icons{
    position:fixed;
    top:56px;
    left:20px;
    display:grid;
    gap:14px;
    z-index:1;
    font-size:12px;
    color:rgba(255,255,255,.85);
  }
  .icon{
    width:72px;
    text-align:center;
  }
  .icon .pic{
    width:56px; height:56px;
    margin:0 auto 6px;
    border-radius:14px;
    background: rgba(255,255,255,.16);
    border:1px solid rgba(255,255,255,.18);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: 0 12px 30px rgba(0,0,0,.28);
  }

  /* ===== App window container (positioned & draggable) ===== */
  .stage{
    position:fixed;
    inset:0;
    padding: 72px 16px 92px;
    display:grid;
    place-items:center;
    z-index:10;
  }

  .app{
    width:min(560px, 92vw);
    border-radius:22px;
    overflow:hidden;
    background: linear-gradient(180deg, var(--glassA), var(--glassB));
    border:1px solid var(--border);
    box-shadow: var(--shadow);
    backdrop-filter: blur(26px);
    -webkit-backdrop-filter: blur(26px);

    opacity:0;
    transform: translate3d(var(--x, 0px), var(--y, 0px), 0) translateY(10px) scale(.985);
    transition: transform .65s cubic-bezier(.2,.9,.2,1), opacity .65s ease;
    will-change: transform;
  }
  .app.ready{
    opacity:1;
    transform: translate3d(var(--x, 0px), var(--y, 0px), 0) translateY(0) scale(1);
  }
  .app.dragging{
    transition:none;
    cursor:grabbing;
  }
  .app.minimized{
    opacity:0;
    pointer-events:none;
    transform: translate3d(var(--x, 0px), var(--y, 0px), 0) translateY(20px) scale(.98);
  }

  .titlebar{
    height:44px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 14px;
    background: rgba(255,255,255,.14);
    border-bottom:1px solid rgba(255,255,255,.14);
    cursor:grab;
  }

  .traffic{ display:flex; gap:8px; align-items:center; }
  .dot{
    width:12px; height:12px; border-radius:50%;
    border:0; padding:0;
    cursor:pointer;
  }
  .dot:active{ transform: scale(.95); }

  .red{ background:#ff5f57; }
  .yellow{ background:#ffbd2e; }
  .green{ background:#28c840; }

  .title{
    font-size:13px;
    color: rgba(255,255,255,.85);
    letter-spacing:.2px;
  }

  .content{
    padding: 34px 28px 26px;
    text-align:center;
  }

  .logoBtn{
    border:0;
    background:transparent;
    padding:0;
    cursor:pointer;
  }
  .logo{
    width:min(320px, 72vw);
    height:auto;
    display:block;
    margin:0 auto;
    filter: drop-shadow(0 18px 35px rgba(0,0,0,.35));
    transition: transform .22s ease, opacity .22s ease;
  }
  .logoBtn:hover .logo{ transform: scale(1.04); opacity:.96; }
  .hint{ margin-top:12px; font-size:13px; color: var(--muted); }

  /* Liquid bubble menu */
  .menuWrap{
    margin-top:18px;
    overflow:hidden;
    max-height:0;
    opacity:0;
    transform: translateY(-10px) scale(.97);
    transition: all .40s cubic-bezier(.2,.9,.2,1);
  }
  .menuWrap.open{
    max-height:420px;
    opacity:1;
    transform: translateY(0) scale(1);
  }
  .menu{ display:grid; gap:14px; }

  .menu a{
    text-decoration:none;
    color: rgba(255,255,255,.92);
    border-radius:999px;
    padding:14px 18px;
    font-size:15px;
    font-weight:600;
    text-align:center;

    background: rgba(255,255,255,.16);
    border:1px solid rgba(255,255,255,.20);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);

    box-shadow:
      0 14px 34px rgba(0,0,0,.32),
      inset 0 1px 0 rgba(255,255,255,.28);

    transition: transform .18s ease, background .18s ease, box-shadow .18s ease;
  }
  .menu a:hover{
    background: rgba(255,255,255,.22);
    transform: translateY(-2px) scale(1.01);
    box-shadow:
      0 20px 50px rgba(0,0,0,.38),
      inset 0 1px 0 rgba(255,255,255,.38);
  }
  .menu a:active{ transform: scale(.985); }

  .menu a.discord{
    background: rgba(88,101,242,.92);
    border:1px solid rgba(255,255,255,.22);
    box-shadow:
      0 18px 44px rgba(88,101,242,.32),
      inset 0 1px 0 rgba(255,255,255,.26);
  }
  .menu a.discord:hover{ background: rgba(88,101,242,1); }

  /* ===== Dock (magnification) ===== */
  .dock{
    position:fixed;
    left:50%;
    bottom:14px;
    transform:translateX(-50%);
    display:flex;
    gap: var(--dockGap, 10px);
    padding:10px 12px;
    border-radius:22px;
    background: var(--dockBg);
    border:1px solid var(--dockBorder);
    backdrop-filter: blur(22px);
    -webkit-backdrop-filter: blur(22px);
    box-shadow: 0 30px 90px rgba(0,0,0,.45);
    z-index:60;
    align-items:flex-end;
  }

  .appicon{
    width:46px; height:46px;
    border-radius:14px;
    background: rgba(255,255,255,.16);
    border:1px solid rgba(255,255,255,.18);
    display:grid;
    place-items:center;
    position:relative;
    transform: translateY(var(--lift, 0px)) scale(var(--scale, 1));
    transform-origin: 50% 100%;
    transition: background .12s ease;
    cursor:pointer;
    will-change: transform;
    margin-left: var(--ml, 0px);
    margin-right: var(--mr, 0px);
  }
  .appicon:hover{ background: rgba(255,255,255,.22); }

  .appicon .runDot{
    position:absolute;
    bottom:-7px;
    width:6px; height:6px;
    border-radius:50%;
    background: rgba(255,255,255,.75);
    opacity:.55;
  }

  .dockimg{
    width:28px;
    height:28px;
    object-fit:contain;
    display:block;
    pointer-events:none;
    filter: drop-shadow(0 10px 18px rgba(0,0,0,.20));
  }

  /* Minimised app dock slot */
  .appslot{ display:none; }
  .appslot.visible{ display:grid; }

  /* macOS-like IG popup */
  .dockPopup{
    position:absolute;
    left:50%;
    bottom:62px;
    transform:translateX(-50%) translateY(8px) scale(.98);
    width: 240px;

    padding:10px;
    border-radius:16px;
    background: rgba(255,255,255,.18);
    border: 1px solid rgba(255,255,255,.20);
    box-shadow: 0 26px 90px rgba(0,0,0,.48);

    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);

    opacity:0;
    pointer-events:none;
    transition: .18s ease;
    z-index:200;
  }
  .appicon.showPopup .dockPopup{
    opacity:1;
    pointer-events:auto;
    transform:translateX(-50%) translateY(0) scale(1);
  }

  .dockPopupHeader{
    font-size:12px;
    color: rgba(255,255,255,.78);
    padding: 4px 8px 8px;
    letter-spacing:.2px;
  }
  .dockSep{
    height:1px;
    background: rgba(255,255,255,.16);
    margin: 6px 6px;
    border-radius:999px;
  }

  .dockItem{
    width:100%;
    border:0;
    background: transparent;
    color: rgba(255,255,255,.92);
    padding:10px 10px;
    border-radius:12px;
    font-size:13px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    cursor:pointer;
    transition:.14s ease;
  }
  .dockItem:hover{
    background: rgba(255,255,255,.14);
    transform: translateY(-1px);
  }
  .dockItemLeft{
    display:flex;
    align-items:center;
    gap:10px;
  }
  .dockTiny{
    width:16px; height:16px;
    object-fit:contain;
    border-radius:4px;
    opacity:.95;
    pointer-events:none;
  }
  .dockItemHint{
    font-size:12px;
    opacity:.65;
  }

  @media (max-width:420px){
    .icons{ display:none; }
    .dock{ gap:8px; padding:8px 10px; }
    .appicon{ width:42px; height:42px; border-radius:13px; }
    .dockPopup{ width: 220px; }
  }

  @media (prefers-reduced-motion: reduce){
    .app, .menuWrap, .logo{ transition:none !important; }
    .dockPopup{ transition:none !important; }
  }
</style>
</head>

<body>
  <div class="wallpaper" aria-hidden="true"></div>
  <div class="brandBlur" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- Top menu bar -->
  <div class="menubar" role="banner" aria-label="macOS menu bar">
    <div class="left">
      <span class="apple" aria-hidden="true"></span>
      <strong style="font-weight:600">Finder</strong>

      <div class="menuItem" data-menu="file">Plik
        <div class="dropdown" role="menu" aria-label="Plik">
          <button type="button" id="newWinBtn">Nowe okno <span class="kbd">âŒ˜N</span></button>
          <button type="button" id="reloadBtn">OdÅ›wieÅ¼ <span class="kbd">âŒ˜R</span></button>
          <button type="button" id="closeMenusBtn">Zamknij menu <span class="kbd">Esc</span></button>
        </div>
      </div>

      <div class="menuItem" data-menu="edit">Edycja
        <div class="dropdown" role="menu" aria-label="Edycja">
          <button type="button">Kopiuj <span class="kbd">âŒ˜C</span></button>
          <button type="button">Wklej <span class="kbd">âŒ˜V</span></button>
          <button type="button">Zaznacz wszystko <span class="kbd">âŒ˜A</span></button>
        </div>
      </div>

      <div class="menuItem" data-menu="view">Widok
        <div class="dropdown" role="menu" aria-label="Widok">
          <button type="button" id="toggleMenuBtn">PokaÅ¼/ukryj menu <span class="kbd">âŒ˜E</span></button>
          <button type="button" id="themeLightBtn">Tryb jasny <span class="kbd">?theme=light</span></button>
          <button type="button" id="themeDarkBtn">Tryb ciemny <span class="kbd">?theme=dark</span></button>
        </div>
      </div>

      <div class="menuItem" data-menu="help">Pomoc
        <div class="dropdown" role="menu" aria-label="Pomoc">
          <a href="https://instagram.com/god.wifi" target="_blank" rel="noopener">Instagram god wifi</a>
          <a href="https://instagram.com/tokarz_k" target="_blank" rel="noopener">Instagram Gumisia</a>
        </div>
      </div>
    </div>

    <div class="right">
      <span style="opacity:.9">Wi-Fi</span>
      <span style="opacity:.9">ðŸ”‹</span>
      <span id="clock" style="opacity:.92; font-variant-numeric: tabular-nums;"></span>
    </div>
  </div>

  <!-- Fake desktop icons -->
  <div class="icons" aria-hidden="true">
    <div class="icon"><div class="pic"></div><div>Dysk</div></div>
    <div class="icon"><div class="pic"></div><div>Folder</div></div>
  </div>

  <!-- Center stage -->
  <div class="stage">
    <section class="app" id="app" aria-label="Okno aplikacji">
      <div class="titlebar" id="titlebar">
        <div class="traffic" aria-label="Sterowanie oknem">
          <button class="dot red" id="btnClose" type="button" aria-label="Zamknij"></button>
          <button class="dot yellow" id="btnMin" type="button" aria-label="Minimalizuj"></button>
          <button class="dot green" id="btnMax" type="button" aria-label="PowiÄ™ksz"></button>
        </div>
        <div class="title">godwifi</div>
        <div style="width:52px;"></div>
      </div>

      <div class="content">
        <button class="logoBtn" id="toggle" aria-expanded="false" aria-controls="menuWrap">
          <img class="logo" id="logo" src="freewifi.png" alt="godwifi logo">
        </button>
        <div class="hint" id="hint">Kliknij logo, aby rozwinÄ…Ä‡</div>

        <div class="menuWrap" id="menuWrap">
          <nav class="menu" aria-label="Linki">
            <a href="https://instagram.com/tokarz_k" target="_blank" rel="noopener">SprawdÅº Instagram Gumisia</a>
            <a href="https://instagram.com/god.wifi" target="_blank" rel="noopener">SprawdÅº Instagram god wifi</a>
            <a id="spotifyLink" href="#" target="_blank" rel="noopener">SprawdÅº Spotify</a>
            <a id="discordLink" class="discord" href="#" target="_blank" rel="noopener">WejdÅº na Discord</a>
          </nav>
        </div>
      </div>
    </section>
  </div>

  <!-- Dock -->
  <div class="dock" id="dock" aria-label="Dock">
    <!-- Instagram (popup wyboru) -->
    <div class="appicon" id="dockIg" title="Instagram">
      <img src="Instagram_icon.png" class="dockimg" alt="">
      <div class="runDot"></div>

      <div class="dockPopup" id="igPopup" role="menu" aria-label="Instagram menu">
        <div class="dockPopupHeader">Instagram</div>
        <div class="dockSep"></div>

        <button class="dockItem" type="button" data-ig="gumis">
          <span class="dockItemLeft">
            <img src="Instagram_icon.png" class="dockTiny" alt="">
            <span>Gumis</span>
          </span>
          <span class="dockItemHint">tokarz_k</span>
        </button>

        <button class="dockItem" type="button" data-ig="godwifi">
          <span class="dockItemLeft">
            <img src="Instagram_icon.png" class="dockTiny" alt="">
            <span>god wifi</span>
          </span>
          <span class="dockItemHint">god.wifi</span>
        </button>
      </div>
    </div>

    <!-- Spotify -->
    <div class="appicon" id="dockSpotify" title="Spotify">
      <img src="Spotify_App_Logo.svg.png" class="dockimg" alt="">
      <div class="runDot"></div>
    </div>

    <!-- Discord -->
    <div class="appicon" id="dockDiscord" title="Discord">
      <img src="discord-logo-icon-editorial-free-vector.png" class="dockimg" alt="">
      <div class="runDot"></div>
    </div>

    <!-- Minimised app slot (pojawia siÄ™ po minimalizacji) -->
    <div class="appicon appslot" id="dockApp" title="godwifi" aria-hidden="true">
      <img src="freewifi.png" class="dockimg" alt="">
      <div class="runDot"></div>
    </div>
  </div>

<script>
  // ======= LINKI =======
  const IG_GUMIS = "https://instagram.com/tokarz_k";
  const IG_GODWIFI = "https://instagram.com/god.wifi";
  const SPOTIFY_URL = "https://open.spotify.com/artist/6iz52ADwFl483ghAI7NuS1?si=V1A-TzIoRNqL1iQ_ptCGng";
  const DISCORD_URL = "https://discord.gg/4PTQRsUq9t";

  // Linki w menu okna
  document.getElementById("spotifyLink").href = SPOTIFY_URL;
  document.getElementById("discordLink").href = DISCORD_URL;

  // ======= Theme override: ?theme=light / ?theme=dark =======
  const params = new URLSearchParams(location.search);
  const theme = params.get("theme");
  if (theme === "light" || theme === "dark") {
    document.documentElement.setAttribute("data-theme", theme);
  }

  // ======= Toggle menu w oknie =======
  const toggle = document.getElementById("toggle");
  const menuWrap = document.getElementById("menuWrap");
  const hint = document.getElementById("hint");
  const app = document.getElementById("app");

  function setOpen(open){
    menuWrap.classList.toggle("open", open);
    toggle.setAttribute("aria-expanded", String(open));
    hint.textContent = open ? "Wybierz link" : "Kliknij logo, aby rozwinÄ…Ä‡";
  }

  toggle.addEventListener("click", (e) => {
    e.stopPropagation();
    setOpen(!menuWrap.classList.contains("open"));
  });

  // ======= Window show when logo ready =======
  const logo = document.getElementById("logo");
  function show(){ app.classList.add("ready"); }
  if (logo.complete) show();
  else logo.addEventListener("load", show);

  // ======= Live clock =======
  const clock = document.getElementById("clock");
  function tick(){
    const d = new Date();
    const hh = String(d.getHours()).padStart(2,"0");
    const mm = String(d.getMinutes()).padStart(2,"0");
    clock.textContent = `${hh}:${mm}`;
  }
  tick();
  setInterval(tick, 1000 * 10);

  // ======= Dropdown menus (menu bar) =======
  const menuItems = Array.from(document.querySelectorAll(".menuItem"));

  function closeAllMenus(){
    menuItems.forEach(i => i.classList.remove("active"));
  }

  menuItems.forEach(item => {
    item.addEventListener("click", (e) => {
      e.stopPropagation();
      const isActive = item.classList.contains("active");
      closeAllMenus();
      item.classList.toggle("active", !isActive);
    });
  });

  // Menu bar actions
  document.getElementById("newWinBtn").addEventListener("click", () => {
    app.animate(
      [{transform: getComputedStyle(app).transform}, {transform: "translate3d(var(--x, 0px), var(--y, 0px), 0) scale(1.01)"}],
      {duration: 180, direction:"alternate", easing:"ease-out"}
    );
    closeAllMenus();
  });
  document.getElementById("reloadBtn").addEventListener("click", () => location.reload());
  document.getElementById("closeMenusBtn").addEventListener("click", () => closeAllMenus());
  document.getElementById("toggleMenuBtn").addEventListener("click", () => { setOpen(!menuWrap.classList.contains("open")); closeAllMenus(); });

  document.getElementById("themeLightBtn").addEventListener("click", () => {
    const u = new URL(location.href); u.searchParams.set("theme","light"); location.href = u.toString();
  });
  document.getElementById("themeDarkBtn").addEventListener("click", () => {
    const u = new URL(location.href); u.searchParams.set("theme","dark"); location.href = u.toString();
  });

  // ======= Draggable window (titlebar) =======
  const titlebar = document.getElementById("titlebar");
  let dragging = false;
  let startX = 0, startY = 0;
  let baseX = 0, baseY = 0;

  function getVarPx(name){
    const v = getComputedStyle(app).getPropertyValue(name).trim();
    return v ? parseFloat(v.replace("px","")) : 0;
  }
  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  titlebar.addEventListener("pointerdown", (e) => {
    // jeÅ›li klikniÄ™to w kropki, nie zaczynaj drag
    if (e.target && e.target.classList && e.target.classList.contains("dot")) return;

    dragging = true;
    titlebar.setPointerCapture(e.pointerId);
    app.classList.add("dragging");
    startX = e.clientX; startY = e.clientY;
    baseX = getVarPx("--x"); baseY = getVarPx("--y");
  });

  titlebar.addEventListener("pointermove", (e) => {
    if (!dragging) return;
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;
    const maxX = (window.innerWidth / 2) - 60;
    const maxY = (window.innerHeight / 2) - 80;
    const nx = clamp(baseX + dx, -maxX, maxX);
    const ny = clamp(baseY + dy, -maxY, maxY);
    app.style.setProperty("--x", nx + "px");
    app.style.setProperty("--y", ny + "px");
  });

  function stopDrag(){
    dragging = false;
    app.classList.remove("dragging");
  }
  titlebar.addEventListener("pointerup", stopDrag);
  titlebar.addEventListener("pointercancel", stopDrag);

  // ======= Dock + IG popup =======
  const dockIg = document.getElementById("dockIg");
  const igPopup = document.getElementById("igPopup");
  const dockSpotify = document.getElementById("dockSpotify");
  const dockDiscord = document.getElementById("dockDiscord");
  const dockApp = document.getElementById("dockApp");

  function closeIgPopup(){ dockIg.classList.remove("showPopup"); }

  dockSpotify.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAllMenus(); closeIgPopup(); setOpen(false);
    window.open(SPOTIFY_URL, "_blank", "noopener");
  });

  dockDiscord.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAllMenus(); closeIgPopup(); setOpen(false);
    window.open(DISCORD_URL, "_blank", "noopener");
  });

  dockIg.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAllMenus();
    const open = !dockIg.classList.contains("showPopup");
    closeIgPopup();
    dockIg.classList.toggle("showPopup", open);
  });

  igPopup.querySelectorAll(".dockItem").forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      const which = btn.getAttribute("data-ig");
      const url = (which === "gumis") ? IG_GUMIS : IG_GODWIFI;
      closeIgPopup();
      window.open(url, "_blank", "noopener");
    });
  });

  // Klik poza: zamknij popup IG + dropdowny
  document.addEventListener("click", (e) => {
    if (!dockIg.contains(e.target)) closeIgPopup();
    closeAllMenus();
  });

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      closeIgPopup();
      closeAllMenus();
      setOpen(false);
      restoreApp();
    }
  });

  // ======= Minimalizacja (Å¼Ã³Å‚te kÃ³Å‚ko) =======
  const btnMin = document.getElementById("btnMin");
  const btnClose = document.getElementById("btnClose");
  const btnMax = document.getElementById("btnMax");

  function minimizeApp(){
    app.classList.add("minimized");
    dockApp.classList.add("visible");
    dockApp.setAttribute("aria-hidden", "false");
    closeAllMenus(); closeIgPopup(); setOpen(false);
  }

  function restoreApp(){
    app.classList.remove("minimized");
    dockApp.classList.remove("visible");
    dockApp.setAttribute("aria-hidden", "true");
  }

  btnMin.addEventListener("click", (e) => { e.stopPropagation(); minimizeApp(); });

  dockApp.addEventListener("click", (e) => { e.stopPropagation(); restoreApp(); });

  // (opcjonalnie) czerwone = minimalizacja teÅ¼ (Å¼eby nie "zamykaÄ‡" strony)
  btnClose.addEventListener("click", (e) => { e.stopPropagation(); minimizeApp(); });

  // zielone = szybki "max" (powiÄ™ksz/zmniejsz)
  let isMax = false;
  btnMax.addEventListener("click", (e) => {
    e.stopPropagation();
    isMax = !isMax;
    if (isMax){
      app.style.width = "min(860px, 96vw)";
    } else {
      app.style.width = "min(560px, 92vw)";
    }
  });

  // ======= Dock magnification (NO overlap) =======
  const dock = document.getElementById("dock");
  const icons = Array.from(dock.querySelectorAll(".appicon"));

  function setDockScales(clientX){
    const rect = dock.getBoundingClientRect();
    const x = clientX - rect.left;

    icons.forEach(icon => {
      icon.style.setProperty("--ml", "0px");
      icon.style.setProperty("--mr", "0px");
    });

    let maxT = 0;

    icons.forEach(icon => {
      const ir = icon.getBoundingClientRect();
      const center = (ir.left + ir.width/2) - rect.left;
      const dist = Math.abs(center - x);

      const maxDist = 160;
      const t = Math.max(0, 1 - (dist / maxDist));
      maxT = Math.max(maxT, t);

      const scale = 1 + (t*t) * 0.8;
      const lift  = - (t*t) * 12;

      icon.style.setProperty("--scale", scale.toFixed(3));
      icon.style.setProperty("--lift", lift.toFixed(2) + "px");

      const push = (t*t) * 14;
      icon.style.setProperty("--ml", push.toFixed(2) + "px");
      icon.style.setProperty("--mr", push.toFixed(2) + "px");
    });

    const extraGap = 10 + maxT * 10; // 10..20
    dock.style.setProperty("--dockGap", extraGap.toFixed(2) + "px");
  }

  dock.addEventListener("mousemove", (e) => setDockScales(e.clientX));

  dock.addEventListener("mouseleave", () => {
    dock.style.setProperty("--dockGap", "10px");
    icons.forEach(icon => {
      icon.style.setProperty("--scale", "1");
      icon.style.setProperty("--lift", "0px");
      icon.style.setProperty("--ml", "0px");
      icon.style.setProperty("--mr", "0px");
    });
  });
</script>

</body>
</html>
